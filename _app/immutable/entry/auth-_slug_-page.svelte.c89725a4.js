import{S as he,i as me,s as be,k as i,l as o,m as d,h as s,n as l,b as O,H as ce,o as Ee,q as V,a as A,r as L,c as R,D as t,R as H,L as F,P as ge,u as we}from"../chunks/index.02c9dc20.js";import{A as de,g as fe}from"../chunks/auth.service.7931f993.js";import{e as pe}from"../chunks/singletons.fc1e7930.js";function ve(c){return c instanceof Error?c.message:"An unexpected error has occurred :("}function Ie(c){let r,a,p,e,n,v,M,w,_,j,I,m,k,U,h,K,y,S,G,C,D,T,P,Q,J,q,N,z,Y,g=c[0].login.error&&_e(c);return{c(){r=i("p"),a=V("Please enter your credentials:"),p=A(),e=i("div"),n=i("div"),v=i("label"),M=V(`Username\r
					`),w=i("div"),_=i("input"),j=A(),I=i("div"),m=i("label"),k=V(`Password\r
					`),U=i("div"),h=i("input"),K=A(),y=i("button"),S=V("Log in"),C=A(),g&&g.c(),D=A(),T=i("div"),P=i("p"),Q=V("Want to register instead?"),J=A(),q=i("button"),N=V("Register"),this.h()},l(u){r=o(u,"P",{class:!0});var b=d(r);a=L(b,"Please enter your credentials:"),b.forEach(s),p=R(u),e=o(u,"DIV",{class:!0});var B=d(e);n=o(B,"DIV",{class:!0});var ee=d(n);v=o(ee,"LABEL",{class:!0});var f=d(v);M=L(f,`Username\r
					`),w=o(f,"DIV",{class:!0});var E=d(w);_=o(E,"INPUT",{class:!0,type:!0}),E.forEach(s),f.forEach(s),ee.forEach(s),j=R(B),I=o(B,"DIV",{class:!0});var W=d(I);m=o(W,"LABEL",{class:!0});var Z=d(m);k=L(Z,`Password\r
					`),U=o(Z,"DIV",{class:!0});var x=d(U);h=o(x,"INPUT",{class:!0,type:!0}),x.forEach(s),Z.forEach(s),W.forEach(s),K=R(B),y=o(B,"BUTTON",{class:!0});var te=d(y);S=L(te,"Log in"),te.forEach(s),C=R(B),g&&g.l(B),B.forEach(s),D=R(u),T=o(u,"DIV",{class:!0});var X=d(T);P=o(X,"P",{});var $=d(P);Q=L($,"Want to register instead?"),$.forEach(s),J=R(X),q=o(X,"BUTTON",{class:!0});var se=d(q);N=L(se,"Register"),se.forEach(s),X.forEach(s),this.h()},h(){l(r,"class","main-info svelte-18ugkqm"),l(_,"class","input"),l(_,"type","username"),l(w,"class","control"),l(v,"class","label"),l(n,"class","field"),l(h,"class","input"),l(h,"type","password"),l(U,"class","control"),l(m,"class","label"),l(I,"class","field"),l(y,"class",G="button is-link is-fullwidth "+(c[0].sending?"is-loading":"")),l(e,"class","auth-form svelte-18ugkqm"),l(q,"class","button is-success"),l(T,"class","alternative svelte-18ugkqm")},m(u,b){O(u,r,b),t(r,a),O(u,p,b),O(u,e,b),t(e,n),t(n,v),t(v,M),t(v,w),t(w,_),H(_,c[0].username),t(e,j),t(e,I),t(I,m),t(m,k),t(m,U),t(U,h),H(h,c[0].password),t(e,K),t(e,y),t(y,S),t(e,C),g&&g.m(e,null),O(u,D,b),O(u,T,b),t(T,P),t(P,Q),t(T,J),t(T,q),t(q,N),z||(Y=[F(_,"input",c[8]),F(h,"input",c[9]),F(y,"click",c[2]),F(q,"click",c[1])],z=!0)},p(u,b){b&1&&H(_,u[0].username),b&1&&h.value!==u[0].password&&H(h,u[0].password),b&1&&G!==(G="button is-link is-fullwidth "+(u[0].sending?"is-loading":""))&&l(y,"class",G),u[0].login.error?g?g.p(u,b):(g=_e(u),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},d(u){u&&s(r),u&&s(p),u&&s(e),g&&g.d(),u&&s(D),u&&s(T),z=!1,ge(Y)}}}function ye(c){let r,a,p,e,n,v,M,w,_,j,I,m,k,U,h,K,y,S,G,C,D,T,P,Q,J,q,N,z,Y,g,u,b,B,ee;return{c(){r=i("p"),a=V("Please fill the following fields to create your account:"),p=A(),e=i("div"),n=i("div"),v=i("label"),M=V(`Name\r
					`),w=i("div"),_=i("input"),j=A(),I=i("div"),m=i("label"),k=V(`Username\r
					`),U=i("div"),h=i("input"),K=A(),y=i("div"),S=i("label"),G=V(`Password\r
					`),C=i("div"),D=i("input"),T=A(),P=i("button"),Q=V("Register"),q=A(),N=i("div"),z=i("p"),Y=V("Do you have an account already?"),g=A(),u=i("button"),b=V("Log in"),this.h()},l(f){r=o(f,"P",{class:!0});var E=d(r);a=L(E,"Please fill the following fields to create your account:"),E.forEach(s),p=R(f),e=o(f,"DIV",{class:!0});var W=d(e);n=o(W,"DIV",{class:!0});var Z=d(n);v=o(Z,"LABEL",{class:!0});var x=d(v);M=L(x,`Name\r
					`),w=o(x,"DIV",{class:!0});var te=d(w);_=o(te,"INPUT",{class:!0,type:!0}),te.forEach(s),x.forEach(s),Z.forEach(s),j=R(W),I=o(W,"DIV",{class:!0});var X=d(I);m=o(X,"LABEL",{class:!0});var $=d(m);k=L($,`Username\r
					`),U=o($,"DIV",{class:!0});var se=d(U);h=o(se,"INPUT",{class:!0,type:!0}),se.forEach(s),$.forEach(s),X.forEach(s),K=R(W),y=o(W,"DIV",{class:!0});var ae=d(y);S=o(ae,"LABEL",{class:!0});var re=d(S);G=L(re,`Password\r
					`),C=o(re,"DIV",{class:!0});var ne=d(C);D=o(ne,"INPUT",{class:!0,type:!0}),ne.forEach(s),re.forEach(s),ae.forEach(s),T=R(W),P=o(W,"BUTTON",{class:!0});var ie=d(P);Q=L(ie,"Register"),ie.forEach(s),W.forEach(s),q=R(f),N=o(f,"DIV",{class:!0});var le=d(N);z=o(le,"P",{});var oe=d(z);Y=L(oe,"Do you have an account already?"),oe.forEach(s),g=R(le),u=o(le,"BUTTON",{class:!0});var ue=d(u);b=L(ue,"Log in"),ue.forEach(s),le.forEach(s),this.h()},h(){l(r,"class","main-info svelte-18ugkqm"),l(_,"class","input"),l(_,"type","text"),l(w,"class","control"),l(v,"class","label"),l(n,"class","field"),l(h,"class","input"),l(h,"type","username"),l(U,"class","control"),l(m,"class","label"),l(I,"class","field"),l(D,"class","input"),l(D,"type","password"),l(C,"class","control"),l(S,"class","label"),l(y,"class","field"),l(P,"class",J="button is-primary is-fullwidth "+(c[0].sending?"is-loading":"")),l(e,"class","auth-form svelte-18ugkqm"),l(u,"class","button is-info"),l(N,"class","alternative svelte-18ugkqm")},m(f,E){O(f,r,E),t(r,a),O(f,p,E),O(f,e,E),t(e,n),t(n,v),t(v,M),t(v,w),t(w,_),H(_,c[0].registering.name),t(e,j),t(e,I),t(I,m),t(m,k),t(m,U),t(U,h),H(h,c[0].username),t(e,K),t(e,y),t(y,S),t(S,G),t(S,C),t(C,D),H(D,c[0].password),t(e,T),t(e,P),t(P,Q),O(f,q,E),O(f,N,E),t(N,z),t(z,Y),t(N,g),t(N,u),t(u,b),B||(ee=[F(_,"input",c[5]),F(h,"input",c[6]),F(D,"input",c[7]),F(P,"click",c[3]),F(u,"click",c[1])],B=!0)},p(f,E){E&1&&_.value!==f[0].registering.name&&H(_,f[0].registering.name),E&1&&H(h,f[0].username),E&1&&D.value!==f[0].password&&H(D,f[0].password),E&1&&J!==(J="button is-primary is-fullwidth "+(f[0].sending?"is-loading":""))&&l(P,"class",J)},d(f){f&&s(r),f&&s(p),f&&s(e),f&&s(q),f&&s(N),B=!1,ge(ee)}}}function _e(c){let r,a=c[0].login.error+"",p;return{c(){r=i("div"),p=V(a),this.h()},l(e){r=o(e,"DIV",{class:!0});var n=d(r);p=L(n,a),n.forEach(s),this.h()},h(){l(r,"class","error svelte-18ugkqm")},m(e,n){O(e,r,n),t(r,p)},p(e,n){n&1&&a!==(a=e[0].login.error+"")&&we(p,a)},d(e){e&&s(r)}}}function ke(c){let r;function a(n,v){if(n[0].registering)return ye;if(n[0].login)return Ie}let p=a(c),e=p&&p(c);return{c(){r=i("div"),e&&e.c(),this.h()},l(n){r=o(n,"DIV",{class:!0});var v=d(r);e&&e.l(v),v.forEach(s),this.h()},h(){l(r,"class","auth svelte-18ugkqm")},m(n,v){O(n,r,v),e&&e.m(r,null)},p(n,[v]){p===(p=a(n))&&e?e.p(n,v):(e&&e.d(1),e=p&&p(n),e&&(e.c(),e.m(r,null)))},i:ce,o:ce,d(n){n&&s(r),e&&e.d()}}}function De(c,r,a){let{data:p}=r;const e={};Ee(()=>{p.startWith==="creation"?a(0,e.registering={},e):a(0,e.login={},e)});function n(){a(0,e.registering=void 0,e),a(0,e.login={},e),a(0,e.sending=!1,e)}async function v(){if(!(!e.username||!e.password||!e.login||e.sending)){a(0,e.login.error=void 0,e),a(0,e.sending=!0,e);try{await de.logIn({username:e.username,password:e.password}),fe(pe)}catch(k){a(0,e.login.error=ve(k),e)}a(0,e.sending=!1,e)}}async function M(){if(!(!e.username||!e.password||!e.registering||e.sending)){a(0,e.registering.error=void 0,e),a(0,e.sending=!0,e);try{await de.register({username:e.username,password:e.password,name:e.registering.name}),fe(pe)}catch(k){a(0,e.registering.error=ve(k),e)}a(0,e.sending=!1,e)}}function w(){e.registering.name=this.value,a(0,e)}function _(){e.username=this.value,a(0,e)}function j(){e.password=this.value,a(0,e)}function I(){e.username=this.value,a(0,e)}function m(){e.password=this.value,a(0,e)}return c.$$set=k=>{"data"in k&&a(4,p=k.data)},[e,n,v,M,p,w,_,j,I,m]}class Ue extends he{constructor(r){super(),me(this,r,De,ke,be,{data:4})}}export{Ue as default};
