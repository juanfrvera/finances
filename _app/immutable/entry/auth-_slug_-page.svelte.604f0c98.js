import{S as fe,i as ve,s as pe,k as n,l as i,m as c,h as s,n as l,b as A,H as ue,o as _e,q as P,a as N,r as V,c as B,D as t,R as Y,L as F,P as de,u as he}from"../chunks/index.02c9dc20.js";import{A as me,g as be}from"../chunks/auth.service.2a21effd.js";function ge(d){return d instanceof Error?d.message:"An unexpected error has occurred :("}function Ee(d){let a,o,v,e,r,p,C,w,h,H,y,m,G,L,b,J,k,R,W,q,D,U,T,K,j,g,M,Q,Z,_=d[0].login.error&&ce(d);return{c(){a=n("p"),o=P("Please enter your credentials:"),v=N(),e=n("div"),r=n("div"),p=n("label"),C=P(`Username
					`),w=n("div"),h=n("input"),H=N(),y=n("div"),m=n("label"),G=P(`Password
					`),L=n("div"),b=n("input"),J=N(),k=n("button"),R=P("Log in"),q=N(),_&&_.c(),D=N(),U=n("div"),T=n("p"),K=P("You don't have an account?"),j=N(),g=n("button"),M=P("Register"),this.h()},l(u){a=i(u,"P",{class:!0});var E=c(a);o=V(E,"Please enter your credentials:"),E.forEach(s),v=B(u),e=i(u,"DIV",{class:!0});var O=c(e);r=i(O,"DIV",{class:!0});var f=c(r);p=i(f,"LABEL",{class:!0});var I=c(p);C=V(I,`Username
					`),w=i(I,"DIV",{class:!0});var S=c(w);h=i(S,"INPUT",{class:!0,type:!0}),S.forEach(s),I.forEach(s),f.forEach(s),H=B(O),y=i(O,"DIV",{class:!0});var x=c(y);m=i(x,"LABEL",{class:!0});var X=c(m);G=V(X,`Password
					`),L=i(X,"DIV",{class:!0});var $=c(L);b=i($,"INPUT",{class:!0,type:!0}),$.forEach(s),X.forEach(s),x.forEach(s),J=B(O),k=i(O,"BUTTON",{class:!0});var ee=c(k);R=V(ee,"Log in"),ee.forEach(s),q=B(O),_&&_.l(O),O.forEach(s),D=B(u),U=i(u,"DIV",{class:!0});var z=c(U);T=i(z,"P",{});var te=c(T);K=V(te,"You don't have an account?"),te.forEach(s),j=B(z),g=i(z,"BUTTON",{class:!0});var se=c(g);M=V(se,"Register"),se.forEach(s),z.forEach(s),this.h()},h(){l(a,"class","main-info svelte-1cdeak3"),l(h,"class","input"),l(h,"type","username"),l(w,"class","control"),l(p,"class","label"),l(r,"class","field"),l(b,"class","input"),l(b,"type","password"),l(L,"class","control"),l(m,"class","label"),l(y,"class","field"),l(k,"class",W="button is-link is-fullwidth "+(d[0].sending?"is-loading":"")),l(e,"class","auth-form svelte-1cdeak3"),l(g,"class","button is-success"),l(U,"class","alternative svelte-1cdeak3")},m(u,E){A(u,a,E),t(a,o),A(u,v,E),A(u,e,E),t(e,r),t(r,p),t(p,C),t(p,w),t(w,h),Y(h,d[0].username),t(e,H),t(e,y),t(y,m),t(m,G),t(m,L),t(L,b),Y(b,d[0].password),t(e,J),t(e,k),t(k,R),t(e,q),_&&_.m(e,null),A(u,D,E),A(u,U,E),t(U,T),t(T,K),t(U,j),t(U,g),t(g,M),Q||(Z=[F(h,"input",d[7]),F(b,"input",d[8]),F(k,"click",d[2]),F(g,"click",d[1])],Q=!0)},p(u,E){E&1&&Y(h,u[0].username),E&1&&b.value!==u[0].password&&Y(b,u[0].password),E&1&&W!==(W="button is-link is-fullwidth "+(u[0].sending?"is-loading":""))&&l(k,"class",W),u[0].login.error?_?_.p(u,E):(_=ce(u),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},d(u){u&&s(a),u&&s(v),u&&s(e),_&&_.d(),u&&s(D),u&&s(U),Q=!1,de(Z)}}}function Ie(d){let a,o,v,e,r,p,C,w,h,H,y,m,G,L,b,J,k,R,W,q,D,U,T,K,j,g,M,Q,Z,_,u,E,O;return{c(){a=n("p"),o=P("Please fill the following fields to create your account:"),v=N(),e=n("div"),r=n("div"),p=n("label"),C=P(`Name
					`),w=n("div"),h=n("input"),H=N(),y=n("div"),m=n("label"),G=P(`Username
					`),L=n("div"),b=n("input"),J=N(),k=n("div"),R=n("label"),W=P(`Password
					`),q=n("div"),D=n("input"),U=N(),T=n("button"),K=P("Register"),j=N(),g=n("div"),M=n("p"),Q=P("Do you have an account already?"),Z=N(),_=n("button"),u=P("Log in"),this.h()},l(f){a=i(f,"P",{class:!0});var I=c(a);o=V(I,"Please fill the following fields to create your account:"),I.forEach(s),v=B(f),e=i(f,"DIV",{class:!0});var S=c(e);r=i(S,"DIV",{class:!0});var x=c(r);p=i(x,"LABEL",{class:!0});var X=c(p);C=V(X,`Name
					`),w=i(X,"DIV",{class:!0});var $=c(w);h=i($,"INPUT",{class:!0,type:!0}),$.forEach(s),X.forEach(s),x.forEach(s),H=B(S),y=i(S,"DIV",{class:!0});var ee=c(y);m=i(ee,"LABEL",{class:!0});var z=c(m);G=V(z,`Username
					`),L=i(z,"DIV",{class:!0});var te=c(L);b=i(te,"INPUT",{class:!0,type:!0}),te.forEach(s),z.forEach(s),ee.forEach(s),J=B(S),k=i(S,"DIV",{class:!0});var se=c(k);R=i(se,"LABEL",{class:!0});var ae=c(R);W=V(ae,`Password
					`),q=i(ae,"DIV",{class:!0});var re=c(q);D=i(re,"INPUT",{class:!0,type:!0}),re.forEach(s),ae.forEach(s),se.forEach(s),U=B(S),T=i(S,"BUTTON",{class:!0});var ne=c(T);K=V(ne,"Register"),ne.forEach(s),S.forEach(s),j=B(f),g=i(f,"DIV",{class:!0});var le=c(g);M=i(le,"P",{});var ie=c(M);Q=V(ie,"Do you have an account already?"),ie.forEach(s),Z=B(le),_=i(le,"BUTTON",{class:!0});var oe=c(_);u=V(oe,"Log in"),oe.forEach(s),le.forEach(s),this.h()},h(){l(a,"class","main-info svelte-1cdeak3"),l(h,"class","input"),l(h,"type","text"),l(w,"class","control"),l(p,"class","label"),l(r,"class","field"),l(b,"class","input"),l(b,"type","username"),l(L,"class","control"),l(m,"class","label"),l(y,"class","field"),l(D,"class","input"),l(D,"type","password"),l(q,"class","control"),l(R,"class","label"),l(k,"class","field"),l(T,"class","button is-primary is-fullwidth"),l(e,"class","auth-form svelte-1cdeak3"),l(_,"class","button is-info"),l(g,"class","alternative svelte-1cdeak3")},m(f,I){A(f,a,I),t(a,o),A(f,v,I),A(f,e,I),t(e,r),t(r,p),t(p,C),t(p,w),t(w,h),Y(h,d[0].registering.name),t(e,H),t(e,y),t(y,m),t(m,G),t(m,L),t(L,b),Y(b,d[0].username),t(e,J),t(e,k),t(k,R),t(R,W),t(R,q),t(q,D),Y(D,d[0].password),t(e,U),t(e,T),t(T,K),A(f,j,I),A(f,g,I),t(g,M),t(M,Q),t(g,Z),t(g,_),t(_,u),E||(O=[F(h,"input",d[4]),F(b,"input",d[5]),F(D,"input",d[6]),F(_,"click",d[1])],E=!0)},p(f,I){I&1&&h.value!==f[0].registering.name&&Y(h,f[0].registering.name),I&1&&Y(b,f[0].username),I&1&&D.value!==f[0].password&&Y(D,f[0].password)},d(f){f&&s(a),f&&s(v),f&&s(e),f&&s(j),f&&s(g),E=!1,de(O)}}}function ce(d){let a,o=d[0].login.error+"",v;return{c(){a=n("div"),v=P(o),this.h()},l(e){a=i(e,"DIV",{class:!0});var r=c(a);v=V(r,o),r.forEach(s),this.h()},h(){l(a,"class","error svelte-1cdeak3")},m(e,r){A(e,a,r),t(a,v)},p(e,r){r&1&&o!==(o=e[0].login.error+"")&&he(v,o)},d(e){e&&s(a)}}}function we(d){let a;function o(r,p){if(r[0].registering)return Ie;if(r[0].login)return Ee}let v=o(d),e=v&&v(d);return{c(){a=n("div"),e&&e.c(),this.h()},l(r){a=i(r,"DIV",{id:!0,class:!0});var p=c(a);e&&e.l(p),p.forEach(s),this.h()},h(){l(a,"id","main"),l(a,"class","svelte-1cdeak3")},m(r,p){A(r,a,p),e&&e.m(a,null)},p(r,[p]){v===(v=o(r))&&e?e.p(r,p):(e&&e.d(1),e=v&&v(r),e&&(e.c(),e.m(a,null)))},i:ue,o:ue,d(r){r&&s(a),e&&e.d()}}}function ye(d,a,o){let{data:v}=a;const e={};_e(()=>{v.startWith==="creation"?o(0,e.registering={},e):o(0,e.login={},e)});function r(){o(0,e.registering=void 0,e),o(0,e.login={},e),o(0,e.sending=!1,e)}async function p(){if(!(!e.username||!e.password||!e.login||e.sending)){o(0,e.login.error=void 0,e),o(0,e.sending=!0,e);try{await me.logIn({username:e.username,password:e.password}),be("/")}catch(m){o(0,e.login.error=ge(m),e)}o(0,e.sending=!1,e)}}function C(){e.registering.name=this.value,o(0,e)}function w(){e.username=this.value,o(0,e)}function h(){e.password=this.value,o(0,e)}function H(){e.username=this.value,o(0,e)}function y(){e.password=this.value,o(0,e)}return d.$$set=m=>{"data"in m&&o(3,v=m.data)},[e,r,p,v,C,w,h,H,y]}class Pe extends fe{constructor(a){super(),ve(this,a,ye,we,pe,{data:3})}}export{Pe as default};
