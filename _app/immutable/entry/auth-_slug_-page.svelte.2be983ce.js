import{S as he,i as me,s as be,k as i,l as o,m as f,h as s,n as r,b as R,H as ce,o as Ee,q as V,a as B,r as L,c as A,D as t,R as C,L as F,P as ge,u as we}from"../chunks/index.02c9dc20.js";import{A as fe,g as de}from"../chunks/auth.service.6500b10d.js";import{e as pe}from"../chunks/singletons.83ce573a.js";function ve(c){return c instanceof Error?c.message:"An unexpected error has occurred :("}function Ie(c){let a,l,p,e,n,v,H,I,_,M,y,b,j,g,m,K,k,O,G,W,D,U,P,Q,J,N,T,z,Y,h=c[0].login.error&&_e(c);return{c(){a=i("p"),l=V("Please enter your credentials:"),p=B(),e=i("div"),n=i("div"),v=i("label"),H=V(`Username
					`),I=i("div"),_=i("input"),M=B(),y=i("div"),b=i("label"),j=V(`Password
					`),g=i("div"),m=i("input"),K=B(),k=i("button"),O=V("Log in"),W=B(),h&&h.c(),D=B(),U=i("div"),P=i("p"),Q=V("Want to register instead?"),J=B(),N=i("button"),T=V("Register"),this.h()},l(u){a=o(u,"P",{class:!0});var E=f(a);l=L(E,"Please enter your credentials:"),E.forEach(s),p=A(u),e=o(u,"DIV",{class:!0});var q=f(e);n=o(q,"DIV",{class:!0});var ee=f(n);v=o(ee,"LABEL",{class:!0});var d=f(v);H=L(d,`Username
					`),I=o(d,"DIV",{class:!0});var w=f(I);_=o(w,"INPUT",{class:!0,type:!0}),w.forEach(s),d.forEach(s),ee.forEach(s),M=A(q),y=o(q,"DIV",{class:!0});var S=f(y);b=o(S,"LABEL",{class:!0});var Z=f(b);j=L(Z,`Password
					`),g=o(Z,"DIV",{class:!0});var x=f(g);m=o(x,"INPUT",{class:!0,type:!0}),x.forEach(s),Z.forEach(s),S.forEach(s),K=A(q),k=o(q,"BUTTON",{class:!0});var te=f(k);O=L(te,"Log in"),te.forEach(s),W=A(q),h&&h.l(q),q.forEach(s),D=A(u),U=o(u,"DIV",{class:!0});var X=f(U);P=o(X,"P",{});var $=f(P);Q=L($,"Want to register instead?"),$.forEach(s),J=A(X),N=o(X,"BUTTON",{class:!0});var se=f(N);T=L(se,"Register"),se.forEach(s),X.forEach(s),this.h()},h(){r(a,"class","main-info svelte-18ugkqm"),r(_,"class","input"),r(_,"type","username"),r(I,"class","control"),r(v,"class","label"),r(n,"class","field"),r(m,"class","input"),r(m,"type","password"),r(g,"class","control"),r(b,"class","label"),r(y,"class","field"),r(k,"class",G="button is-link is-fullwidth "+(c[0].sending?"is-loading":"")),r(e,"class","auth-form svelte-18ugkqm"),r(N,"class","button is-success"),r(U,"class","alternative svelte-18ugkqm")},m(u,E){R(u,a,E),t(a,l),R(u,p,E),R(u,e,E),t(e,n),t(n,v),t(v,H),t(v,I),t(I,_),C(_,c[0].username),t(e,M),t(e,y),t(y,b),t(b,j),t(b,g),t(g,m),C(m,c[0].password),t(e,K),t(e,k),t(k,O),t(e,W),h&&h.m(e,null),R(u,D,E),R(u,U,E),t(U,P),t(P,Q),t(U,J),t(U,N),t(N,T),z||(Y=[F(_,"input",c[9]),F(m,"input",c[10]),F(k,"click",c[3]),F(N,"click",c[2])],z=!0)},p(u,E){E&1&&C(_,u[0].username),E&1&&m.value!==u[0].password&&C(m,u[0].password),E&1&&G!==(G="button is-link is-fullwidth "+(u[0].sending?"is-loading":""))&&r(k,"class",G),u[0].login.error?h?h.p(u,E):(h=_e(u),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},d(u){u&&s(a),u&&s(p),u&&s(e),h&&h.d(),u&&s(D),u&&s(U),z=!1,ge(Y)}}}function ye(c){let a,l,p,e,n,v,H,I,_,M,y,b,j,g,m,K,k,O,G,W,D,U,P,Q,J,N,T,z,Y,h,u,E,q,ee;return{c(){a=i("p"),l=V("Please fill the following fields to create your account:"),p=B(),e=i("div"),n=i("div"),v=i("label"),H=V(`Name
					`),I=i("div"),_=i("input"),M=B(),y=i("div"),b=i("label"),j=V(`Username
					`),g=i("div"),m=i("input"),K=B(),k=i("div"),O=i("label"),G=V(`Password
					`),W=i("div"),D=i("input"),U=B(),P=i("button"),Q=V("Register"),N=B(),T=i("div"),z=i("p"),Y=V("Do you have an account already?"),h=B(),u=i("button"),E=V("Log in"),this.h()},l(d){a=o(d,"P",{class:!0});var w=f(a);l=L(w,"Please fill the following fields to create your account:"),w.forEach(s),p=A(d),e=o(d,"DIV",{class:!0});var S=f(e);n=o(S,"DIV",{class:!0});var Z=f(n);v=o(Z,"LABEL",{class:!0});var x=f(v);H=L(x,`Name
					`),I=o(x,"DIV",{class:!0});var te=f(I);_=o(te,"INPUT",{class:!0,type:!0}),te.forEach(s),x.forEach(s),Z.forEach(s),M=A(S),y=o(S,"DIV",{class:!0});var X=f(y);b=o(X,"LABEL",{class:!0});var $=f(b);j=L($,`Username
					`),g=o($,"DIV",{class:!0});var se=f(g);m=o(se,"INPUT",{class:!0,type:!0}),se.forEach(s),$.forEach(s),X.forEach(s),K=A(S),k=o(S,"DIV",{class:!0});var ae=f(k);O=o(ae,"LABEL",{class:!0});var re=f(O);G=L(re,`Password
					`),W=o(re,"DIV",{class:!0});var ne=f(W);D=o(ne,"INPUT",{class:!0,type:!0}),ne.forEach(s),re.forEach(s),ae.forEach(s),U=A(S),P=o(S,"BUTTON",{class:!0});var ie=f(P);Q=L(ie,"Register"),ie.forEach(s),S.forEach(s),N=A(d),T=o(d,"DIV",{class:!0});var le=f(T);z=o(le,"P",{});var oe=f(z);Y=L(oe,"Do you have an account already?"),oe.forEach(s),h=A(le),u=o(le,"BUTTON",{class:!0});var ue=f(u);E=L(ue,"Log in"),ue.forEach(s),le.forEach(s),this.h()},h(){r(a,"class","main-info svelte-18ugkqm"),r(_,"class","input"),r(_,"type","text"),r(I,"class","control"),r(v,"class","label"),r(n,"class","field"),r(m,"class","input"),r(m,"type","username"),r(g,"class","control"),r(b,"class","label"),r(y,"class","field"),r(D,"class","input"),r(D,"type","password"),r(W,"class","control"),r(O,"class","label"),r(k,"class","field"),r(P,"class",J="button is-primary is-fullwidth "+(c[0].sending?"is-loading":"")),r(e,"class","auth-form svelte-18ugkqm"),r(u,"class","button is-info"),r(T,"class","alternative svelte-18ugkqm")},m(d,w){R(d,a,w),t(a,l),R(d,p,w),R(d,e,w),t(e,n),t(n,v),t(v,H),t(v,I),t(I,_),C(_,c[0].registering.name),t(e,M),t(e,y),t(y,b),t(b,j),t(b,g),t(g,m),C(m,c[0].username),t(e,K),t(e,k),t(k,O),t(O,G),t(O,W),t(W,D),C(D,c[0].password),t(e,U),t(e,P),t(P,Q),R(d,N,w),R(d,T,w),t(T,z),t(z,Y),t(T,h),t(T,u),t(u,E),q||(ee=[F(_,"input",c[6]),F(m,"input",c[7]),F(D,"input",c[8]),F(P,"click",c[4]),F(u,"click",c[1])],q=!0)},p(d,w){w&1&&_.value!==d[0].registering.name&&C(_,d[0].registering.name),w&1&&C(m,d[0].username),w&1&&D.value!==d[0].password&&C(D,d[0].password),w&1&&J!==(J="button is-primary is-fullwidth "+(d[0].sending?"is-loading":""))&&r(P,"class",J)},d(d){d&&s(a),d&&s(p),d&&s(e),d&&s(N),d&&s(T),q=!1,ge(ee)}}}function _e(c){let a,l=c[0].login.error+"",p;return{c(){a=i("div"),p=V(l),this.h()},l(e){a=o(e,"DIV",{class:!0});var n=f(a);p=L(n,l),n.forEach(s),this.h()},h(){r(a,"class","error svelte-18ugkqm")},m(e,n){R(e,a,n),t(a,p)},p(e,n){n&1&&l!==(l=e[0].login.error+"")&&we(p,l)},d(e){e&&s(a)}}}function ke(c){let a;function l(n,v){if(n[0].registering)return ye;if(n[0].login)return Ie}let p=l(c),e=p&&p(c);return{c(){a=i("div"),e&&e.c(),this.h()},l(n){a=o(n,"DIV",{class:!0});var v=f(a);e&&e.l(v),v.forEach(s),this.h()},h(){r(a,"class","auth svelte-18ugkqm")},m(n,v){R(n,a,v),e&&e.m(a,null)},p(n,[v]){p===(p=l(n))&&e?e.p(n,v):(e&&e.d(1),e=p&&p(n),e&&(e.c(),e.m(a,null)))},i:ce,o:ce,d(n){n&&s(a),e&&e.d()}}}function De(c,a,l){let{data:p}=a;const e={};Ee(()=>{p.startWith==="creation"?l(0,e.registering={},e):l(0,e.login={},e)});function n(){l(0,e.registering=void 0,e),l(0,e.login={},e),l(0,e.sending=!1,e)}function v(){l(0,e.login=void 0,e),l(0,e.registering={},e),l(0,e.sending=!1,e)}async function H(){if(!(!e.username||!e.password||!e.login||e.sending)){l(0,e.login.error=void 0,e),l(0,e.sending=!0,e);try{await fe.logIn({username:e.username,password:e.password}),de(pe)}catch(g){l(0,e.login.error=ve(g),e)}l(0,e.sending=!1,e)}}async function I(){if(!(!e.username||!e.password||!e.registering||e.sending)){l(0,e.registering.error=void 0,e),l(0,e.sending=!0,e);try{await fe.register({username:e.username,password:e.password,name:e.registering.name}),de(pe)}catch(g){l(0,e.registering.error=ve(g),e)}l(0,e.sending=!1,e)}}function _(){e.registering.name=this.value,l(0,e)}function M(){e.username=this.value,l(0,e)}function y(){e.password=this.value,l(0,e)}function b(){e.username=this.value,l(0,e)}function j(){e.password=this.value,l(0,e)}return c.$$set=g=>{"data"in g&&l(5,p=g.data)},[e,n,v,H,I,p,_,M,y,b,j]}class Ue extends he{constructor(a){super(),me(this,a,De,ke,be,{data:5})}}export{Ue as default};
