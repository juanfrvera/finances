var Dl=Object.defineProperty;var Sl=(r,e,t)=>e in r?Dl(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Re=(r,e,t)=>(Sl(r,typeof e!="symbol"?e+"":e,t),t);import{S as ue,i as fe,s as de,k as b,q as P,a as I,l as g,m as E,r as V,h as d,c as D,n as m,b as U,D as c,H as x,J as Cl,o as je,K as Lt,e as ne,L as K,M as Bt,N as xe,O as Rt,P as Se,u as z,w as et,Q as tt,y as q,z as Z,R as ce,A as G,T as nt,U as Oe,g as A,d as L,B as J,v as ae,f as re,V as Et,W as Wt,X as ot,Y as Pl,x as lt,Z as Vl,C as un,E as fn,F as dn,G as hn,_ as Al,$ as Ul}from"../chunks/index.02c9dc20.js";import{P as Ml,A as fl,g as jt,U as _n}from"../chunks/auth.service.6500b10d.js";import{e as Ol}from"../chunks/singletons.83ce573a.js";var Pt=function(r,e){return Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])},Pt(r,e)};function $t(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Pt(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Vt(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gt(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),a,l=[],s;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)l.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return l}function wt(r,e,t){if(t||arguments.length===2)for(var n=0,a=e.length,l;n<a;n++)(l||!(n in e))&&(l||(l=Array.prototype.slice.call(e,0,n)),l[n]=e[n]);return r.concat(l||Array.prototype.slice.call(e))}function We(r){return typeof r=="function"}function dl(r){var e=function(n){Error.call(n),n.stack=new Error().stack},t=r(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var St=dl(function(r){return function(t){r(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,a){return a+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function At(r,e){if(r){var t=r.indexOf(e);0<=t&&r.splice(t,1)}}var Tt=function(){function r(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var e,t,n,a,l;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var o=Vt(s),i=o.next();!i.done;i=o.next()){var u=i.value;u.remove(this)}}catch(w){e={error:w}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else s.remove(this);var h=this.initialTeardown;if(We(h))try{h()}catch(w){l=w instanceof St?w.errors:[w]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var _=Vt(f),v=_.next();!v.done;v=_.next()){var p=v.value;try{pn(p)}catch(w){l=l??[],w instanceof St?l=wt(wt([],gt(l)),gt(w.errors)):l.push(w)}}}catch(w){n={error:w}}finally{try{v&&!v.done&&(a=_.return)&&a.call(_)}finally{if(n)throw n.error}}}if(l)throw new St(l)}},r.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)pn(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},r.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},r.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},r.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&At(t,e)},r.prototype.remove=function(e){var t=this._finalizers;t&&At(t,e),e instanceof r&&e._removeParent(this)},r.EMPTY=function(){var e=new r;return e.closed=!0,e}(),r}(),hl=Tt.EMPTY;function _l(r){return r instanceof Tt||r&&"closed"in r&&We(r.remove)&&We(r.add)&&We(r.unsubscribe)}function pn(r){We(r)?r():r.unsubscribe()}var pl={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ut={setTimeout:function(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];var a=Ut.delegate;return a!=null&&a.setTimeout?a.setTimeout.apply(a,wt([r,e],gt(t))):setTimeout.apply(void 0,wt([r,e],gt(t)))},clearTimeout:function(r){var e=Ut.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(r)},delegate:void 0};function Nl(r){Ut.setTimeout(function(){throw r})}function mn(){}function bt(r){r()}var ml=function(r){$t(e,r);function e(t){var n=r.call(this)||this;return n.isStopped=!1,t?(n.destination=t,_l(t)&&t.add(n)):n.destination=Wl,n}return e.create=function(t,n,a){return new Mt(t,n,a)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Tt),Ll=Function.prototype.bind;function Ct(r,e){return Ll.call(r,e)}var Bl=function(){function r(e){this.partialObserver=e}return r.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){yt(n)}},r.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){yt(n)}else yt(e)},r.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){yt(t)}},r}(),Mt=function(r){$t(e,r);function e(t,n,a){var l=r.call(this)||this,s;if(We(t)||!t)s={next:t??void 0,error:n??void 0,complete:a??void 0};else{var o;l&&pl.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=function(){return l.unsubscribe()},s={next:t.next&&Ct(t.next,o),error:t.error&&Ct(t.error,o),complete:t.complete&&Ct(t.complete,o)}):s=t}return l.destination=new Bl(s),l}return e}(ml);function yt(r){Nl(r)}function Rl(r){throw r}var Wl={closed:!0,next:mn,error:Rl,complete:mn},jl=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Hl(r){return r}function Yl(r){return r.length===0?Hl:r.length===1?r[0]:function(t){return r.reduce(function(n,a){return a(n)},t)}}var vn=function(){function r(e){e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var a=this,l=Fl(e)?e:new Mt(e,t,n);return bt(function(){var s=a,o=s.operator,i=s.source;l.add(o?o.call(l,i):i?a._subscribe(l):a._trySubscribe(l))}),l},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},r.prototype.forEach=function(e,t){var n=this;return t=yn(t),new t(function(a,l){var s=new Mt({next:function(o){try{e(o)}catch(i){l(i),s.unsubscribe()}},error:l,complete:a});n.subscribe(s)})},r.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},r.prototype[jl]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Yl(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=yn(e),new e(function(n,a){var l;t.subscribe(function(s){return l=s},function(s){return a(s)},function(){return n(l)})})},r.create=function(e){return new r(e)},r}();function yn(r){var e;return(e=r??pl.Promise)!==null&&e!==void 0?e:Promise}function Kl(r){return r&&We(r.next)&&We(r.error)&&We(r.complete)}function Fl(r){return r&&r instanceof ml||Kl(r)&&_l(r)}var Ql=dl(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ht=function(r){$t(e,r);function e(){var t=r.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var n=new bn(this,this);return n.operator=t,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new Ql},e.prototype.next=function(t){var n=this;bt(function(){var a,l;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var s=Vt(n.currentObservers),o=s.next();!o.done;o=s.next()){var i=o.value;i.next(t)}}catch(u){a={error:u}}finally{try{o&&!o.done&&(l=s.return)&&l.call(s)}finally{if(a)throw a.error}}}})},e.prototype.error=function(t){var n=this;bt(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var a=n.observers;a.length;)a.shift().error(t)}})},e.prototype.complete=function(){var t=this;bt(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var n=this,a=this,l=a.hasError,s=a.isStopped,o=a.observers;return l||s?hl:(this.currentObservers=null,o.push(t),new Tt(function(){n.currentObservers=null,At(o,t)}))},e.prototype._checkFinalizedStatuses=function(t){var n=this,a=n.hasError,l=n.thrownError,s=n.isStopped;a?t.error(l):s&&t.complete()},e.prototype.asObservable=function(){var t=new vn;return t.source=this,t},e.create=function(t,n){return new bn(t,n)},e}(vn),bn=function(r){$t(e,r);function e(t,n){var a=r.call(this)||this;return a.destination=t,a.source=n,a}return e.prototype.next=function(t){var n,a;(a=(n=this.destination)===null||n===void 0?void 0:n.next)===null||a===void 0||a.call(n,t)},e.prototype.error=function(t){var n,a;(a=(n=this.destination)===null||n===void 0?void 0:n.error)===null||a===void 0||a.call(n,t)},e.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},e.prototype._subscribe=function(t){var n,a;return(a=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&a!==void 0?a:hl},e}(Ht);class ke{static getUrl(){return this.url}static getHeaders(){return{Authorization:`Bearer ${fl.getToken()}`}}static async interceptResponse(e){const t=await e.json();if(e.status!==200&&e.status!==201)throw e.status===401&&jt(`${Ol}/auth/login`),new Error(t);return t}}Re(ke,"url",Ml);class Ot{static async create(e){const t=await fetch(this.getUrl(),{method:"POST",body:JSON.stringify(e),headers:this.getHeaders()});return ke.interceptResponse(t)}static async update(e){const t=await fetch(`${this.getUrl()}/${e._id}`,{method:"PATCH",body:JSON.stringify(e),headers:this.getHeaders()});return ke.interceptResponse(t)}static getUrl(){return`${ke.getUrl()}/payments`}static getHeaders(){return ke.getHeaders()}}class Ue{static async getItems(){const e=await fetch(this.getUrl(),{method:"GET",headers:this.getHeaders()}),t=await ke.interceptResponse(e);return t.filter(a=>a.type==="currency").forEach(a=>{const l=t.filter(s=>s.type==="account"&&s.currency===a.currency);l&&l.length?a.total=l.map(s=>s.balance).reduce((s,o)=>s+o):a.total=0}),t}static async create(e){const t=await fetch(this.getUrl(),{method:"POST",body:JSON.stringify(e),headers:this.getHeaders()});return ke.interceptResponse(t)}static async update(e,t){const n=await fetch(`${this.getUrl()}/${e}`,{method:"PATCH",body:JSON.stringify(t),headers:this.getHeaders()});return ke.interceptResponse(n)}static async delete(e){const t=await fetch(`${this.getUrl()}/${e}`,{method:"DELETE",headers:this.getHeaders()});return ke.interceptResponse(t)}static addPayment(e,t){return Ot.create({...t,itemId:e})}static updatePayment(e,t){return Ot.update({...t,itemId:e})}static getUrl(){return`${ke.getUrl()}/items`}static getHeaders(){return ke.getHeaders()}}class Ze{static async getList(){if(!this.list){const e=await fetch(this.getUrl(),{method:"GET",headers:this.getHeaders()});this.list=await ke.interceptResponse(e)}return this.list}static async create(e){const t=await Ue.create(e);return this.list&&this.list.unshift(t),t}static async arsToUsd(e){const t=await this.getUsdToArsRatio();return e/t}static async getUsdToArsRatio(){if(!this.usdToArsRatio){const e=await fetch("https://api.bluelytics.com.ar/v2/latest",{method:"GET"});if(e.status==200){const t=await e.json();this.usdToArsRatio=t.blue.value_avg}}if(!this.usdToArsRatio)throw new Error("Couldn't get usd price");return this.usdToArsRatio}static async arsToUsdOnDate(e,t){if(!this.historicalUsdToArs[t]){const n=`https://api.bluelytics.com.ar/v2/historical?day=${t}`,a=await fetch(n,{method:"GET"});if(a.status==200){const l=await a.json();this.historicalUsdToArs[t]=l.blue.value_avg}}if(!this.historicalUsdToArs[t])throw new Error("Couldn't get usd price");return e/this.historicalUsdToArs[t]}static getUrl(){return`${ke.getUrl()}/currency`}static getHeaders(){return ke.getHeaders()}}Re(Ze,"list"),Re(Ze,"usdToArsRatio"),Re(Ze,"historicalUsdToArs",{});class Xe{static getCurrencies(){return Ze.getList()}}Re(Xe,"contextKey","currencyContext"),Re(Xe,"currencyAddedSubject",new Ht);function gn(r,e,t){const n=r.slice();return n[6]=e[t],n}function ql(r){let e,t;return{c(){e=b("div"),t=P("Loading currencies..."),this.h()},l(n){e=g(n,"DIV",{class:!0});var a=E(e);t=V(a,"Loading currencies..."),a.forEach(d),this.h()},h(){m(e,"class","loading")},m(n,a){U(n,e,a),c(e,t)},p:x,d(n){n&&d(e)}}}function Gl(r){let e;function t(l,s){return l[1].list.length?zl:Jl}let n=t(r),a=n(r);return{c(){a.c(),e=ne()},l(l){a.l(l),e=ne()},m(l,s){a.m(l,s),U(l,e,s)},p(l,s){n===(n=t(l))&&a?a.p(l,s):(a.d(1),a=n(l),a&&(a.c(),a.m(e.parentNode,e)))},d(l){a.d(l),l&&d(e)}}}function Jl(r){let e,t,n,a,l,s;return{c(){e=b("div"),t=P("You don't have currencies "),n=b("button"),a=P("Create one"),this.h()},l(o){e=g(o,"DIV",{class:!0});var i=E(e);t=V(i,"You don't have currencies "),n=g(i,"BUTTON",{});var u=E(n);a=V(u,"Create one"),u.forEach(d),i.forEach(d),this.h()},h(){m(e,"class","create-currency-info svelte-1qu231b")},m(o,i){U(o,e,i),c(e,t),c(e,n),c(n,a),l||(s=K(n,"click",r[3]),l=!0)},p:x,d(o){o&&d(e),l=!1,s()}}}function zl(r){let e,t,n,a,l,s,o=r[1].list,i=[];for(let u=0;u<o.length;u+=1)i[u]=wn(gn(r,o,u));return{c(){e=b("div"),t=b("select");for(let u=0;u<i.length;u+=1)i[u].c();n=b("option"),a=P("Create new currency"),this.h()},l(u){e=g(u,"DIV",{class:!0});var h=E(e);t=g(h,"SELECT",{id:!0,class:!0});var f=E(t);for(let v=0;v<i.length;v+=1)i[v].l(f);n=g(f,"OPTION",{});var _=E(n);a=V(_,"Create new currency"),_.forEach(d),f.forEach(d),h.forEach(d),this.h()},h(){n.__value="create-new",n.value=n.__value,m(t,"id","currency-input"),m(t,"class","w-100"),r[0]===void 0&&Bt(()=>r[4].call(t)),m(e,"class","select input-stretch")},m(u,h){U(u,e,h),c(e,t);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(t,null);c(t,n),c(n,a),xe(t,r[0]),l||(s=[K(n,"click",r[3]),K(t,"change",r[4]),K(t,"change",r[2])],l=!0)},p(u,h){if(h&2){o=u[1].list;let f;for(f=0;f<o.length;f+=1){const _=gn(u,o,f);i[f]?i[f].p(_,h):(i[f]=wn(_),i[f].c(),i[f].m(t,n))}for(;f<i.length;f+=1)i[f].d(1);i.length=o.length}h&3&&xe(t,u[0])},d(u){u&&d(e),Rt(i,u),l=!1,Se(s)}}}function wn(r){let e,t=r[6]+"",n,a;return{c(){e=b("option"),n=P(t),this.h()},l(l){e=g(l,"OPTION",{});var s=E(e);n=V(s,t),s.forEach(d),this.h()},h(){e.__value=a=r[6],e.value=e.__value},m(l,s){U(l,e,s),c(e,n)},p(l,s){s&2&&t!==(t=l[6]+"")&&z(n,t),s&2&&a!==(a=l[6])&&(e.__value=a,e.value=e.__value)},d(l){l&&d(e)}}}function Zl(r){let e,t,n,a;function l(i,u){return i[1].list?Gl:ql}let s=l(r),o=s(r);return{c(){e=b("div"),t=b("label"),n=P("Currency"),a=I(),o.c(),this.h()},l(i){e=g(i,"DIV",{class:!0});var u=E(e);t=g(u,"LABEL",{for:!0});var h=E(t);n=V(h,"Currency"),h.forEach(d),a=D(u),o.l(u),u.forEach(d),this.h()},h(){m(t,"for","currency-input"),m(e,"class","label-and-input")},m(i,u){U(i,e,u),c(e,t),c(t,n),c(e,a),o.m(e,null)},p(i,[u]){s===(s=l(i))&&o?o.p(i,u):(o.d(1),o=s(i),o&&(o.c(),o.m(e,null)))},i:x,o:x,d(i){i&&d(e),o.d()}}}function Xl(r,e,t){let{value:n="ars"}=e;const a=Cl(Xe.contextKey),l={createNewKey:"create-new"};je(async()=>{t(1,l.list=(await a.getCurrencies()).map(u=>u.currency),l)});function s(u){u.target.value===l.createNewKey&&o()}function o(){a.onGoToCreation()}function i(){n=Lt(this),t(0,n),t(1,l)}return r.$$set=u=>{"value"in u&&t(0,n=u.value)},[n,l,s,o,i]}class Yt extends ue{constructor(e){super(),fe(this,e,Xl,Zl,de,{value:0})}}function xl(r){let e,t,n,a,l,s,o,i,u,h,f,_,v,p,w,y,$;function C(S){r[2](S)}let N={};return r[0].currency!==void 0&&(N.value=r[0].currency),o=new Yt({props:N}),et.push(()=>tt(o,"value",C)),{c(){e=b("div"),t=b("label"),n=P("Name"),a=I(),l=b("input"),s=I(),q(o.$$.fragment),u=I(),h=b("div"),f=b("label"),_=P("Balance"),v=I(),p=b("input"),this.h()},l(S){e=g(S,"DIV",{class:!0});var k=E(e);t=g(k,"LABEL",{for:!0});var T=E(t);n=V(T,"Name"),T.forEach(d),a=D(k),l=g(k,"INPUT",{id:!0,class:!0}),k.forEach(d),s=D(S),Z(o.$$.fragment,S),u=D(S),h=g(S,"DIV",{class:!0});var O=E(h);f=g(O,"LABEL",{for:!0});var M=E(f);_=V(M,"Balance"),M.forEach(d),v=D(O),p=g(O,"INPUT",{id:!0,type:!0,class:!0}),O.forEach(d),this.h()},h(){m(t,"for","name-input"),m(l,"id","name-input"),m(l,"class","input-stretch"),m(e,"class","label-and-input"),m(f,"for","balance-input"),m(p,"id","balance-input"),m(p,"type","number"),m(p,"class","input-stretch"),m(h,"class","label-and-input")},m(S,k){U(S,e,k),c(e,t),c(t,n),c(e,a),c(e,l),ce(l,r[0].name),U(S,s,k),G(o,S,k),U(S,u,k),U(S,h,k),c(h,f),c(f,_),c(h,v),c(h,p),ce(p,r[0].balance),w=!0,y||($=[K(l,"input",r[1]),K(p,"input",r[3])],y=!0)},p(S,[k]){k&1&&l.value!==S[0].name&&ce(l,S[0].name);const T={};!i&&k&1&&(i=!0,T.value=S[0].currency,nt(()=>i=!1)),o.$set(T),k&1&&Oe(p.value)!==S[0].balance&&ce(p,S[0].balance)},i(S){w||(A(o.$$.fragment,S),w=!0)},o(S){L(o.$$.fragment,S),w=!1},d(S){S&&d(e),S&&d(s),J(o,S),S&&d(u),S&&d(h),y=!1,Se($)}}}function ea(r,e,t){let{config:n}=e;function a(){n.name=this.value,t(0,n)}function l(o){r.$$.not_equal(n.currency,o)&&(n.currency=o,t(0,n))}function s(){n.balance=Oe(this.value),t(0,n)}return r.$$set=o=>{"config"in o&&t(0,n=o.config)},[n,a,l,s]}class Kt extends ue{constructor(e){super(),fe(this,e,ea,xl,de,{config:0})}}function ta(r){let e,t,n,a,l,s;return{c(){e=b("label"),t=b("input"),n=I(),a=b("span"),this.h()},l(o){e=g(o,"LABEL",{class:!0});var i=E(e);t=g(i,"INPUT",{type:!0,class:!0}),n=D(i),a=g(i,"SPAN",{class:!0}),E(a).forEach(d),i.forEach(d),this.h()},h(){m(t,"type","checkbox"),m(t,"class","svelte-1ufkol1"),m(a,"class","slider svelte-1ufkol1"),m(e,"class","switch svelte-1ufkol1")},m(o,i){U(o,e,i),c(e,t),t.checked=r[0],c(e,n),c(e,a),l||(s=K(t,"change",r[1]),l=!0)},p(o,[i]){i&1&&(t.checked=o[0])},i:x,o:x,d(o){o&&d(e),l=!1,s()}}}function na(r,e,t){let{checked:n}=e;function a(){n=this.checked,t(0,n)}return r.$$set=l=>{"checked"in l&&t(0,n=l.checked)},[n,a]}class vl extends ue{constructor(e){super(),fe(this,e,na,ta,de,{checked:0})}}function la(r){let e,t,n,a,l,s,o,i,u,h,f,_,v,p,w,y,$,C,N,S,k,T,O,M,R,H,Y,Q,W,ee,le;function se(B){r[3](B)}let j={};r[0].currency!==void 0&&(j.value=r[0].currency),v=new Yt({props:j}),et.push(()=>tt(v,"value",se));function te(B){r[4](B)}let he={};return r[0].theyPayMe!==void 0&&(he.checked=r[0].theyPayMe),k=new vl({props:he}),et.push(()=>tt(k,"checked",te)),{c(){e=b("div"),t=b("label"),n=P("With who"),a=I(),l=b("input"),s=I(),o=b("div"),i=b("label"),u=P("Amount"),h=I(),f=b("input"),_=I(),q(v.$$.fragment),w=I(),y=b("div"),$=b("label"),C=P("They Pay Me"),N=I(),S=b("div"),q(k.$$.fragment),O=I(),M=b("div"),R=b("label"),H=P("Description"),Y=I(),Q=b("input"),this.h()},l(B){e=g(B,"DIV",{class:!0});var F=E(e);t=g(F,"LABEL",{for:!0});var X=E(t);n=V(X,"With who"),X.forEach(d),a=D(F),l=g(F,"INPUT",{id:!0,class:!0}),F.forEach(d),s=D(B),o=g(B,"DIV",{class:!0});var oe=E(o);i=g(oe,"LABEL",{for:!0});var pe=E(i);u=V(pe,"Amount"),pe.forEach(d),h=D(oe),f=g(oe,"INPUT",{id:!0,type:!0,class:!0}),oe.forEach(d),_=D(B),Z(v.$$.fragment,B),w=D(B),y=g(B,"DIV",{class:!0});var ve=E(y);$=g(ve,"LABEL",{for:!0});var be=E($);C=V(be,"They Pay Me"),be.forEach(d),N=D(ve),S=g(ve,"DIV",{class:!0});var _e=E(S);Z(k.$$.fragment,_e),_e.forEach(d),ve.forEach(d),O=D(B),M=g(B,"DIV",{class:!0});var me=E(M);R=g(me,"LABEL",{for:!0});var Ee=E(R);H=V(Ee,"Description"),Ee.forEach(d),Y=D(me),Q=g(me,"INPUT",{id:!0,class:!0}),me.forEach(d),this.h()},h(){m(t,"for","who-input"),m(l,"id","who-input"),m(l,"class","input-stretch"),m(e,"class","label-and-input"),m(i,"for","amount-input"),m(f,"id","amount-input"),m(f,"type","number"),m(f,"class","input-stretch"),m(o,"class","label-and-input"),m($,"for","is-manual-input"),m(S,"class","switch-container"),m(y,"class","label-and-input"),m(R,"for","description-input"),m(Q,"id","description-input"),m(Q,"class","input-stretch"),m(M,"class","label-and-input")},m(B,F){U(B,e,F),c(e,t),c(t,n),c(e,a),c(e,l),ce(l,r[0].withWho),U(B,s,F),U(B,o,F),c(o,i),c(i,u),c(o,h),c(o,f),ce(f,r[0].amount),U(B,_,F),G(v,B,F),U(B,w,F),U(B,y,F),c(y,$),c($,C),c(y,N),c(y,S),G(k,S,null),U(B,O,F),U(B,M,F),c(M,R),c(R,H),c(M,Y),c(M,Q),ce(Q,r[0].description),W=!0,ee||(le=[K(l,"input",r[1]),K(f,"input",r[2]),K(Q,"input",r[5])],ee=!0)},p(B,[F]){F&1&&l.value!==B[0].withWho&&ce(l,B[0].withWho),F&1&&Oe(f.value)!==B[0].amount&&ce(f,B[0].amount);const X={};!p&&F&1&&(p=!0,X.value=B[0].currency,nt(()=>p=!1)),v.$set(X);const oe={};!T&&F&1&&(T=!0,oe.checked=B[0].theyPayMe,nt(()=>T=!1)),k.$set(oe),F&1&&Q.value!==B[0].description&&ce(Q,B[0].description)},i(B){W||(A(v.$$.fragment,B),A(k.$$.fragment,B),W=!0)},o(B){L(v.$$.fragment,B),L(k.$$.fragment,B),W=!1},d(B){B&&d(e),B&&d(s),B&&d(o),B&&d(_),J(v,B),B&&d(w),B&&d(y),J(k),B&&d(O),B&&d(M),ee=!1,Se(le)}}}function aa(r,e,t){let{config:n}=e;function a(){n.withWho=this.value,t(0,n)}function l(){n.amount=Oe(this.value),t(0,n)}function s(u){r.$$.not_equal(n.currency,u)&&(n.currency=u,t(0,n))}function o(u){r.$$.not_equal(n.theyPayMe,u)&&(n.theyPayMe=u,t(0,n))}function i(){n.description=this.value,t(0,n)}return r.$$set=u=>{"config"in u&&t(0,n=u.config)},[n,a,l,s,o,i]}class ra extends ue{constructor(e){super(),fe(this,e,aa,la,de,{config:0})}}function sa(r){let e,t,n,a,l,s,o,i,u,h,f,_,v,p,w,y,$,C,N,S,k,T,O,M,R,H,Y,Q;function W(j){r[2](j)}let ee={};r[0].currency!==void 0&&(ee.value=r[0].currency),o=new Yt({props:ee}),et.push(()=>tt(o,"value",W));function le(j){r[4](j)}let se={};return r[0].isManual!==void 0&&(se.checked=r[0].isManual),k=new vl({props:se}),et.push(()=>tt(k,"checked",le)),{c(){e=b("div"),t=b("label"),n=P("Name"),a=I(),l=b("input"),s=I(),q(o.$$.fragment),u=I(),h=b("div"),f=b("label"),_=P("Cost"),v=I(),p=b("input"),w=I(),y=b("div"),$=b("label"),C=P("Is Manual"),N=I(),S=b("div"),q(k.$$.fragment),O=I(),M=b("div"),R=P(`Mark the service as manual if you want to mark it as paid every month. You can change this setting
	later.`),this.h()},l(j){e=g(j,"DIV",{class:!0});var te=E(e);t=g(te,"LABEL",{for:!0});var he=E(t);n=V(he,"Name"),he.forEach(d),a=D(te),l=g(te,"INPUT",{id:!0,class:!0}),te.forEach(d),s=D(j),Z(o.$$.fragment,j),u=D(j),h=g(j,"DIV",{class:!0});var B=E(h);f=g(B,"LABEL",{for:!0});var F=E(f);_=V(F,"Cost"),F.forEach(d),v=D(B),p=g(B,"INPUT",{id:!0,type:!0,class:!0}),B.forEach(d),w=D(j),y=g(j,"DIV",{class:!0});var X=E(y);$=g(X,"LABEL",{for:!0});var oe=E($);C=V(oe,"Is Manual"),oe.forEach(d),N=D(X),S=g(X,"DIV",{class:!0});var pe=E(S);Z(k.$$.fragment,pe),pe.forEach(d),X.forEach(d),O=D(j),M=g(j,"DIV",{});var ve=E(M);R=V(ve,`Mark the service as manual if you want to mark it as paid every month. You can change this setting
	later.`),ve.forEach(d),this.h()},h(){m(t,"for","name-input"),m(l,"id","name-input"),m(l,"class","input-stretch"),m(e,"class","label-and-input"),m(f,"for","cost-input"),m(p,"id","cost-input"),m(p,"type","number"),m(p,"class","input-stretch"),m(h,"class","label-and-input"),m($,"for","is-manual-input"),m(S,"class","switch-container svelte-1chm4va"),m(y,"class","label-and-input")},m(j,te){U(j,e,te),c(e,t),c(t,n),c(e,a),c(e,l),ce(l,r[0].name),U(j,s,te),G(o,j,te),U(j,u,te),U(j,h,te),c(h,f),c(f,_),c(h,v),c(h,p),ce(p,r[0].cost),U(j,w,te),U(j,y,te),c(y,$),c($,C),c(y,N),c(y,S),G(k,S,null),U(j,O,te),U(j,M,te),c(M,R),H=!0,Y||(Q=[K(l,"input",r[1]),K(p,"input",r[3])],Y=!0)},p(j,[te]){te&1&&l.value!==j[0].name&&ce(l,j[0].name);const he={};!i&&te&1&&(i=!0,he.value=j[0].currency,nt(()=>i=!1)),o.$set(he),te&1&&Oe(p.value)!==j[0].cost&&ce(p,j[0].cost);const B={};!T&&te&1&&(T=!0,B.checked=j[0].isManual,nt(()=>T=!1)),k.$set(B)},i(j){H||(A(o.$$.fragment,j),A(k.$$.fragment,j),H=!0)},o(j){L(o.$$.fragment,j),L(k.$$.fragment,j),H=!1},d(j){j&&d(e),j&&d(s),J(o,j),j&&d(u),j&&d(h),j&&d(w),j&&d(y),J(k),j&&d(O),j&&d(M),Y=!1,Se(Q)}}}function ia(r,e,t){let{config:n}=e;function a(){n.name=this.value,t(0,n)}function l(i){r.$$.not_equal(n.currency,i)&&(n.currency=i,t(0,n))}function s(){n.cost=Oe(this.value),t(0,n)}function o(i){r.$$.not_equal(n.isManual,i)&&(n.isManual=i,t(0,n))}return r.$$set=i=>{"config"in i&&t(0,n=i.config)},[n,a,l,s,o]}class oa extends ue{constructor(e){super(),fe(this,e,ia,sa,de,{config:0})}}function kn(r){let e,t,n;return{c(){e=b("span"),t=P("."),n=P(r[0]),this.h()},l(a){e=g(a,"SPAN",{class:!0});var l=E(e);t=V(l,"."),n=V(l,r[0]),l.forEach(d),this.h()},h(){m(e,"class","decimal-part svelte-7b3tfn")},m(a,l){U(a,e,l),c(e,t),c(e,n)},p(a,l){l&1&&z(n,a[0])},d(a){a&&d(e)}}}function ca(r){let e,t,n,a=r[0]!="0"&&kn(r);return{c(){e=b("span"),t=P(r[1]),a&&a.c(),n=ne(),this.h()},l(l){e=g(l,"SPAN",{class:!0});var s=E(e);t=V(s,r[1]),s.forEach(d),a&&a.l(l),n=ne(),this.h()},h(){m(e,"class","int-part")},m(l,s){U(l,e,s),c(e,t),a&&a.m(l,s),U(l,n,s)},p(l,[s]){s&2&&z(t,l[1]),l[0]!="0"?a?a.p(l,s):(a=kn(l),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i:x,o:x,d(l){l&&d(e),a&&a.d(l),l&&d(n)}}}function ua(r,e,t){let n,a,{value:l}=e;return r.$$set=s=>{"value"in s&&t(2,l=s.value)},r.$$.update=()=>{r.$$.dirty&4&&t(1,n=Math.floor(l).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),r.$$.dirty&4&&t(0,a=((l-Math.floor(l))*100).toFixed(0))},[a,n,l]}class Me extends ue{constructor(e){super(),fe(this,e,ua,ca,de,{value:2})}}function fa(r){let e,t=r[0].name+"",n,a,l,s,o,i=r[0].currency+"",u,h;return s=new Me({props:{value:r[0].balance}}),{c(){e=b("div"),n=P(t),a=I(),l=b("div"),q(s.$$.fragment),o=I(),u=P(i),this.h()},l(f){e=g(f,"DIV",{class:!0});var _=E(e);n=V(_,t),_.forEach(d),a=D(f),l=g(f,"DIV",{class:!0});var v=E(l);Z(s.$$.fragment,v),o=D(v),u=V(v,i),v.forEach(d),this.h()},h(){m(e,"class","name"),m(l,"class","data")},m(f,_){U(f,e,_),c(e,n),U(f,a,_),U(f,l,_),G(s,l,null),c(l,o),c(l,u),h=!0},p(f,[_]){(!h||_&1)&&t!==(t=f[0].name+"")&&z(n,t);const v={};_&1&&(v.value=f[0].balance),s.$set(v),(!h||_&1)&&i!==(i=f[0].currency+"")&&z(u,i)},i(f){h||(A(s.$$.fragment,f),h=!0)},o(f){L(s.$$.fragment,f),h=!1},d(f){f&&d(e),f&&d(a),f&&d(l),J(s)}}}function da(r,e,t){let{data:n}=e;return r.$$set=a=>{"data"in a&&t(0,n=a.data)},[n]}class yl extends ue{constructor(e){super(),fe(this,e,da,fa,de,{data:0})}}class ze{static calculatePayStateString(e){const n=this.getPaidAmount(e)>=e.amount,a=e.withWho;let l=`${a} owes`;const s=e.theyPayMe;return s&&n?`${a} paid`:!s&&n?`You paid ${a}`:!s&&!n?`You owe ${a}`:l}static getPaidAmount(e){let t=0;return e.payments&&e.payments.forEach(n=>t+=n.amount),t}static getOwedAmountOrZero(e){const t=this.getPaidAmount(e),n=e.amount-t;return n>0?n:0}}function En(r){let e,t,n=r[1].payDirectionString+"",a,l,s,o=r[0].description+"",i,u,h,f,_,v=r[0].currency+"",p,w,y;return f=new Me({props:{value:r[1].amountToShow}}),{c(){e=b("div"),t=b("div"),a=P(n),l=I(),s=b("div"),i=P(o),u=I(),h=b("div"),q(f.$$.fragment),_=I(),p=P(v),this.h()},l($){e=g($,"DIV",{class:!0});var C=E(e);t=g(C,"DIV",{});var N=E(t);a=V(N,n),N.forEach(d),l=D(C),s=g(C,"DIV",{});var S=E(s);i=V(S,o),S.forEach(d),u=D(C),h=g(C,"DIV",{class:!0});var k=E(h);Z(f.$$.fragment,k),_=D(k),p=V(k,v),k.forEach(d),C.forEach(d),this.h()},h(){m(h,"class","data"),m(e,"class",w=r[1].containerClass)},m($,C){U($,e,C),c(e,t),c(t,a),c(e,l),c(e,s),c(s,i),c(e,u),c(e,h),G(f,h,null),c(h,_),c(h,p),y=!0},p($,C){(!y||C&2)&&n!==(n=$[1].payDirectionString+"")&&z(a,n),(!y||C&1)&&o!==(o=$[0].description+"")&&z(i,o);const N={};C&2&&(N.value=$[1].amountToShow),f.$set(N),(!y||C&1)&&v!==(v=$[0].currency+"")&&z(p,v),(!y||C&2&&w!==(w=$[1].containerClass))&&m(e,"class",w)},i($){y||(A(f.$$.fragment,$),y=!0)},o($){L(f.$$.fragment,$),y=!1},d($){$&&d(e),J(f)}}}function ha(r){let e,t,n=r[1]!=null&&En(r);return{c(){n&&n.c(),e=ne()},l(a){n&&n.l(a),e=ne()},m(a,l){n&&n.m(a,l),U(a,e,l),t=!0},p(a,[l]){a[1]!=null?n?(n.p(a,l),l&2&&A(n,1)):(n=En(a),n.c(),A(n,1),n.m(e.parentNode,e)):n&&(ae(),L(n,1,1,()=>{n=null}),re())},i(a){t||(A(n),t=!0)},o(a){L(n),t=!1},d(a){n&&n.d(a),a&&d(e)}}}function _a(r,e,t){let{data:n}=e,a;return je(()=>{const l=ze.getPaidAmount(n),s=l>=n.amount;t(1,a={containerClass:s?"paid":"unpaid",payDirectionString:ze.calculatePayStateString(n),amountToShow:s?l:n.amount-l})}),r.$$set=l=>{"data"in l&&t(0,n=l.data)},[n,a]}class pa extends ue{constructor(e){super(),fe(this,e,_a,ha,de,{data:0})}}function ma(r){let e,t,n=r[0].name+"",a,l,s,o,i,u=r[0].currency+"",h,f,_;return o=new Me({props:{value:r[0].cost}}),{c(){e=b("div"),t=b("div"),a=P(n),l=I(),s=b("div"),q(o.$$.fragment),i=I(),h=P(u),this.h()},l(v){e=g(v,"DIV",{class:!0});var p=E(e);t=g(p,"DIV",{class:!0});var w=E(t);a=V(w,n),w.forEach(d),l=D(p),s=g(p,"DIV",{class:!0});var y=E(s);Z(o.$$.fragment,y),i=D(y),h=V(y,u),y.forEach(d),p.forEach(d),this.h()},h(){m(t,"class","name"),m(s,"class","data"),m(e,"class",f=r[1].containerClass)},m(v,p){U(v,e,p),c(e,t),c(t,a),c(e,l),c(e,s),G(o,s,null),c(s,i),c(s,h),_=!0},p(v,[p]){(!_||p&1)&&n!==(n=v[0].name+"")&&z(a,n);const w={};p&1&&(w.value=v[0].cost),o.$set(w),(!_||p&1)&&u!==(u=v[0].currency+"")&&z(h,u),(!_||p&2&&f!==(f=v[1].containerClass))&&m(e,"class",f)},i(v){_||(A(o.$$.fragment,v),_=!0)},o(v){L(o.$$.fragment,v),_=!1},d(v){v&&d(e),J(o)}}}function va(r,e,t){let{data:n}=e;const a={};return je(()=>{n.isManual&&(Dt.wasThisMonthPaid(n)?t(1,a.containerClass="paid",a):t(1,a.containerClass="unpaid",a))}),r.$$set=l=>{"data"in l&&t(0,n=l.data)},[n,a]}class ya extends ue{constructor(e){super(),fe(this,e,va,ma,de,{data:0})}}function ba(r){let e,t=r[0].currency+"",n,a,l,s,o,i=r[0].currency+"",u,h;return s=new Me({props:{value:r[0].total}}),{c(){e=b("div"),n=P(t),a=I(),l=b("div"),q(s.$$.fragment),o=I(),u=P(i)},l(f){e=g(f,"DIV",{});var _=E(e);n=V(_,t),_.forEach(d),a=D(f),l=g(f,"DIV",{});var v=E(l);Z(s.$$.fragment,v),o=D(v),u=V(v,i),v.forEach(d)},m(f,_){U(f,e,_),c(e,n),U(f,a,_),U(f,l,_),G(s,l,null),c(l,o),c(l,u),h=!0},p(f,[_]){(!h||_&1)&&t!==(t=f[0].currency+"")&&z(n,t);const v={};_&1&&(v.value=f[0].total),s.$set(v),(!h||_&1)&&i!==(i=f[0].currency+"")&&z(u,i)},i(f){h||(A(s.$$.fragment,f),h=!0)},o(f){L(s.$$.fragment,f),h=!1},d(f){f&&d(e),f&&d(a),f&&d(l),J(s)}}}function ga(r,e,t){let{data:n}=e;return r.$$set=a=>{"data"in a&&t(0,n=a.data)},[n]}class wa extends ue{constructor(e){super(),fe(this,e,ga,ba,de,{data:0})}}function $n(r,e,t){const n=r.slice();return n[4]=e[t],n}function ka(r){let e;return{c(){e=P("Loading transactions...")},l(t){e=V(t,"Loading transactions...")},m(t,n){U(t,e,n)},p:x,i:x,o:x,d(t){t&&d(e)}}}function Ea(r){let e,t,n,a;const l=[Ta,$a],s=[];function o(i,u){return i[0].length?0:1}return e=o(r),t=s[e]=l[e](r),{c(){t.c(),n=ne()},l(i){t.l(i),n=ne()},m(i,u){s[e].m(i,u),U(i,n,u),a=!0},p(i,u){let h=e;e=o(i),e===h?s[e].p(i,u):(ae(),L(s[h],1,1,()=>{s[h]=null}),re(),t=s[e],t?t.p(i,u):(t=s[e]=l[e](i),t.c()),A(t,1),t.m(n.parentNode,n))},i(i){a||(A(t),a=!0)},o(i){L(t),a=!1},d(i){s[e].d(i),i&&d(n)}}}function $a(r){let e;return{c(){e=P("You don't have transactions yet")},l(t){e=V(t,"You don't have transactions yet")},m(t,n){U(t,e,n)},p:x,i:x,o:x,d(t){t&&d(e)}}}function Ta(r){let e,t,n,a,l,s,o,i,u,h,f,_,v,p,w,y=[],$=new Map,C,N=r[0];const S=k=>k[4]._id+"//"+k[4].amount+"//"+k[4].dateString+k[4].note;for(let k=0;k<N.length;k+=1){let T=$n(r,N,k),O=S(T);$.set(O,y[k]=Tn(O,T))}return{c(){e=b("div"),t=b("div"),n=b("div"),a=b("div"),l=P("Amount"),s=I(),o=b("div"),i=P("Date"),u=I(),h=b("div"),f=P("Type"),_=I(),v=b("div"),p=P("Notes"),w=I();for(let k=0;k<y.length;k+=1)y[k].c();this.h()},l(k){e=g(k,"DIV",{class:!0});var T=E(e);t=g(T,"DIV",{class:!0,role:!0});var O=E(t);n=g(O,"DIV",{class:!0,role:!0});var M=E(n);a=g(M,"DIV",{class:!0});var R=E(a);l=V(R,"Amount"),R.forEach(d),s=D(M),o=g(M,"DIV",{class:!0});var H=E(o);i=V(H,"Date"),H.forEach(d),u=D(M),h=g(M,"DIV",{class:!0});var Y=E(h);f=V(Y,"Type"),Y.forEach(d),_=D(M),v=g(M,"DIV",{class:!0});var Q=E(v);p=V(Q,"Notes"),Q.forEach(d),M.forEach(d),w=D(O);for(let W=0;W<y.length;W+=1)y[W].l(O);O.forEach(d),T.forEach(d),this.h()},h(){m(a,"class","transaction-table__column svelte-1ihykmo"),m(o,"class","transaction-table__column svelte-1ihykmo"),m(h,"class","transaction-table__column svelte-1ihykmo"),m(v,"class","transaction-table__column svelte-1ihykmo"),m(n,"class","transaction-table__header transaction-table__row svelte-1ihykmo"),m(n,"role","rowgroup"),m(t,"class","transaction-table__table transaction-table__table_4-columns svelte-1ihykmo"),m(t,"role","table"),m(e,"class","transaction-table svelte-1ihykmo")},m(k,T){U(k,e,T),c(e,t),c(t,n),c(n,a),c(a,l),c(n,s),c(n,o),c(o,i),c(n,u),c(n,h),c(h,f),c(n,_),c(n,v),c(v,p),c(t,w);for(let O=0;O<y.length;O+=1)y[O]&&y[O].m(t,null);C=!0},p(k,T){T&3&&(N=k[0],ae(),y=Et(y,T,S,1,k,N,$,t,Wt,Tn,null,$n),re())},i(k){if(!C){for(let T=0;T<N.length;T+=1)A(y[T]);C=!0}},o(k){for(let T=0;T<y.length;T+=1)L(y[T]);C=!1},d(k){k&&d(e);for(let T=0;T<y.length;T+=1)y[T].d()}}}function Tn(r,e){let t,n,a,l,s,o=e[4].dateString+"",i,u,h,f=e[4].transactionType+"",_,v,p,w=(e[4].note??"-")+"",y,$,C,N,S;a=new Me({props:{value:e[4].amount}});function k(){return e[3](e[4])}return{key:r,first:null,c(){t=b("div"),n=b("div"),q(a.$$.fragment),l=I(),s=b("div"),i=P(o),u=I(),h=b("div"),_=P(f),v=I(),p=b("div"),y=P(w),$=I(),this.h()},l(T){t=g(T,"DIV",{class:!0,role:!0});var O=E(t);n=g(O,"DIV",{class:!0,role:!0});var M=E(n);Z(a.$$.fragment,M),M.forEach(d),l=D(O),s=g(O,"DIV",{class:!0,role:!0});var R=E(s);i=V(R,o),R.forEach(d),u=D(O),h=g(O,"DIV",{class:!0,role:!0});var H=E(h);_=V(H,f),H.forEach(d),v=D(O),p=g(O,"DIV",{class:!0,role:!0});var Y=E(p);y=V(Y,w),Y.forEach(d),$=D(O),O.forEach(d),this.h()},h(){m(n,"class","transaction-table__column transaction-table__amount svelte-1ihykmo"),m(n,"role","cell"),m(s,"class","transaction-table__column transaction-table__date svelte-1ihykmo"),m(s,"role","cell"),m(h,"class","transaction-table__column transaction-table__type svelte-1ihykmo"),m(h,"role","cell"),m(p,"class","transaction-table__column transaction-table__note svelte-1ihykmo"),m(p,"role","cell"),m(t,"class","transaction-table__row transaction-table__row_clickable svelte-1ihykmo"),m(t,"role","rowgroup"),this.first=t},m(T,O){U(T,t,O),c(t,n),G(a,n,null),c(t,l),c(t,s),c(s,i),c(t,u),c(t,h),c(h,_),c(t,v),c(t,p),c(p,y),c(t,$),C=!0,N||(S=K(t,"click",k),N=!0)},p(T,O){e=T;const M={};O&1&&(M.value=e[4].amount),a.$set(M),(!C||O&1)&&o!==(o=e[4].dateString+"")&&z(i,o),(!C||O&1)&&f!==(f=e[4].transactionType+"")&&z(_,f),(!C||O&1)&&w!==(w=(e[4].note??"-")+"")&&z(y,w)},i(T){C||(A(a.$$.fragment,T),C=!0)},o(T){L(a.$$.fragment,T),C=!1},d(T){T&&d(t),J(a),N=!1,S()}}}function Ia(r){let e,t,n,a;const l=[Ea,ka],s=[];function o(i,u){return i[0]?0:1}return e=o(r),t=s[e]=l[e](r),{c(){t.c(),n=ne()},l(i){t.l(i),n=ne()},m(i,u){s[e].m(i,u),U(i,n,u),a=!0},p(i,[u]){let h=e;e=o(i),e===h?s[e].p(i,u):(ae(),L(s[h],1,1,()=>{s[h]=null}),re(),t=s[e],t?t.p(i,u):(t=s[e]=l[e](i),t.c()),A(t,1),t.m(n.parentNode,n))},i(i){a||(A(t),a=!0)},o(i){L(t),a=!1},d(i){s[e].d(i),i&&d(n)}}}function Da(r,e,t){let{onRowClicked:n}=e,{rows:a}=e;function l(o){n(o)}const s=o=>l(o);return r.$$set=o=>{"onRowClicked"in o&&t(2,n=o.onRowClicked),"rows"in o&&t(0,a=o.rows)},[a,l,n,s]}class Sa extends ue{constructor(e){super(),fe(this,e,Da,Ia,de,{onRowClicked:2,rows:0})}}class Ca{static async addTransaction(e,t){const n=await Ot.create({...t,itemId:e._id});let a=e.balance;return n.amount!=0&&(n.transactionType==="add"?a+=n.amount:n.transactionType==="subtract"&&(a-=n.amount),await Ue.update(e._id,{balance:a})),{createdPayment:n,balance:a}}static getUrl(){return`${ke.getUrl()}/items`}static getHeaders(){return ke.getHeaders()}}function In(r,e,t){const n=r.slice();return n[12]=e[t],n}function Dn(r){let e,t,n,a,l,s,o,i=r[1].tabs.list,u=[];for(let _=0;_<i.length;_+=1)u[_]=Sn(In(r,i,_));let h=r[1].tabs.activeTab==="main"&&Cn(r),f=r[1].tabs.activeTab==="transactions"&&Pn(r);return{c(){e=b("div"),t=b("div"),n=b("ul");for(let _=0;_<u.length;_+=1)u[_].c();a=I(),l=b("div"),h&&h.c(),s=I(),f&&f.c(),this.h()},l(_){e=g(_,"DIV",{class:!0});var v=E(e);t=g(v,"DIV",{class:!0});var p=E(t);n=g(p,"UL",{});var w=E(n);for(let $=0;$<u.length;$+=1)u[$].l(w);w.forEach(d),p.forEach(d),a=D(v),l=g(v,"DIV",{class:!0});var y=E(l);h&&h.l(y),s=D(y),f&&f.l(y),y.forEach(d),v.forEach(d),this.h()},h(){m(t,"class","see-tabs tabs"),m(l,"class","account-see__body"),m(e,"class","account-see svelte-1xelh1h")},m(_,v){U(_,e,v),c(e,t),c(t,n);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(n,null);c(e,a),c(e,l),h&&h.m(l,null),c(l,s),f&&f.m(l,null),o=!0},p(_,v){if(v&6){i=_[1].tabs.list;let p;for(p=0;p<i.length;p+=1){const w=In(_,i,p);u[p]?u[p].p(w,v):(u[p]=Sn(w),u[p].c(),u[p].m(n,null))}for(;p<u.length;p+=1)u[p].d(1);u.length=i.length}_[1].tabs.activeTab==="main"?h?h.p(_,v):(h=Cn(_),h.c(),h.m(l,s)):h&&(h.d(1),h=null),_[1].tabs.activeTab==="transactions"?f?(f.p(_,v),v&2&&A(f,1)):(f=Pn(_),f.c(),A(f,1),f.m(l,null)):f&&(ae(),L(f,1,1,()=>{f=null}),re())},i(_){o||(A(f),o=!0)},o(_){L(f),o=!1},d(_){_&&d(e),Rt(u,_),h&&h.d(),f&&f.d()}}}function Sn(r){let e,t,n=r[12].title+"",a,l,s,o,i;function u(){return r[6](r[12])}return{c(){e=b("li"),t=b("a"),a=P(n),l=I(),this.h()},l(h){e=g(h,"LI",{class:!0});var f=E(e);t=g(f,"A",{});var _=E(t);a=V(_,n),_.forEach(d),l=D(f),f.forEach(d),this.h()},h(){m(e,"class",s=r[12].active?"is-active":"")},m(h,f){U(h,e,f),c(e,t),c(t,a),c(e,l),o||(i=K(t,"click",u),o=!0)},p(h,f){r=h,f&2&&n!==(n=r[12].title+"")&&z(a,n),f&2&&s!==(s=r[12].active?"is-active":"")&&m(e,"class",s)},d(h){h&&d(e),o=!1,i()}}}function Cn(r){let e,t=r[0].name+"",n,a,l,s=r[0].balance+"",o,i,u=r[0].currency+"",h;return{c(){e=b("div"),n=P(t),a=I(),l=b("div"),o=P(s),i=I(),h=P(u)},l(f){e=g(f,"DIV",{});var _=E(e);n=V(_,t),_.forEach(d),a=D(f),l=g(f,"DIV",{});var v=E(l);o=V(v,s),i=D(v),h=V(v,u),v.forEach(d)},m(f,_){U(f,e,_),c(e,n),U(f,a,_),U(f,l,_),c(l,o),c(l,i),c(l,h)},p(f,_){_&1&&t!==(t=f[0].name+"")&&z(n,t),_&1&&s!==(s=f[0].balance+"")&&z(o,s),_&1&&u!==(u=f[0].currency+"")&&z(h,u)},d(f){f&&d(e),f&&d(a),f&&d(l)}}}function Pn(r){let e,t,n,a;function l(i,u){return i[1].transactions.creator?Pa:Va}let s=l(r),o=s(r);return n=new Sa({props:{rows:r[0].payments,onRowClicked:Ma}}),{c(){e=b("div"),o.c(),t=I(),q(n.$$.fragment),this.h()},l(i){e=g(i,"DIV",{class:!0});var u=E(e);o.l(u),t=D(u),Z(n.$$.fragment,u),u.forEach(d),this.h()},h(){m(e,"class","account-see__transactions svelte-1xelh1h")},m(i,u){U(i,e,u),o.m(e,null),c(e,t),G(n,e,null),a=!0},p(i,u){s===(s=l(i))&&o?o.p(i,u):(o.d(1),o=s(i),o&&(o.c(),o.m(e,t)));const h={};u&1&&(h.rows=i[0].payments),n.$set(h)},i(i){a||(A(n.$$.fragment,i),a=!0)},o(i){L(n.$$.fragment,i),a=!1},d(i){i&&d(e),o.d(),J(n)}}}function Pa(r){let e,t,n,a,l,s,o,i,u,h,f,_,v,p,w,y,$,C,N,S,k,T,O,M,R,H,Y,Q,W,ee,le,se,j,te,he;return{c(){e=b("div"),t=b("div"),n=b("div"),a=b("label"),l=P("Type"),s=I(),o=b("div"),i=b("select"),u=b("option"),h=P("Add to this account"),f=b("option"),_=P("Subtract from this account"),v=I(),p=b("div"),w=b("label"),y=P("Amount"),$=I(),C=b("input"),N=I(),S=b("div"),k=b("label"),T=P("Notes"),O=I(),M=b("input"),R=I(),H=b("div"),Y=b("button"),Q=P("Confirm"),ee=I(),le=b("button"),se=P("Cancel"),this.h()},l(B){e=g(B,"DIV",{class:!0});var F=E(e);t=g(F,"DIV",{class:!0});var X=E(t);n=g(X,"DIV",{class:!0});var oe=E(n);a=g(oe,"LABEL",{for:!0});var pe=E(a);l=V(pe,"Type"),pe.forEach(d),s=D(oe),o=g(oe,"DIV",{class:!0});var ve=E(o);i=g(ve,"SELECT",{id:!0,class:!0});var be=E(i);u=g(be,"OPTION",{});var _e=E(u);h=V(_e,"Add to this account"),_e.forEach(d),f=g(be,"OPTION",{});var me=E(f);_=V(me,"Subtract from this account"),me.forEach(d),be.forEach(d),ve.forEach(d),oe.forEach(d),v=D(X),p=g(X,"DIV",{class:!0});var Ee=E(p);w=g(Ee,"LABEL",{for:!0});var Ie=E(w);y=V(Ie,"Amount"),Ie.forEach(d),$=D(Ee),C=g(Ee,"INPUT",{type:!0,class:!0,id:!0}),Ee.forEach(d),N=D(X),S=g(X,"DIV",{class:!0});var ge=E(S);k=g(ge,"LABEL",{for:!0});var De=E(k);T=V(De,"Notes"),De.forEach(d),O=D(ge),M=g(ge,"INPUT",{type:!0,class:!0,id:!0}),ge.forEach(d),X.forEach(d),R=D(F),H=g(F,"DIV",{class:!0});var $e=E(H);Y=g($e,"BUTTON",{class:!0});var we=E(Y);Q=V(we,"Confirm"),we.forEach(d),ee=D($e),le=g($e,"BUTTON",{class:!0});var ie=E(le);se=V(ie,"Cancel"),ie.forEach(d),$e.forEach(d),F.forEach(d),this.h()},h(){m(a,"for","type-input"),u.__value="add",u.value=u.__value,f.__value="subtract",f.value=f.__value,m(i,"id","type-input"),m(i,"class","w-100"),r[1].transactions.creator.t.transactionType===void 0&&Bt(()=>r[7].call(i)),m(o,"class","select input-stretch"),m(n,"class","label-and-input clickable-height"),m(w,"for","amount-input"),m(C,"type","number"),m(C,"class","input-stretch"),m(C,"id","amount-input"),m(p,"class","label-and-input"),m(k,"for","notes-input"),m(M,"type","text"),m(M,"class","input-stretch"),m(M,"id","notes-input"),m(S,"class","label-and-input"),m(t,"class","form"),m(Y,"class",W="button "+(r[1].transactions.creator.loading?"is-loading":"")),m(le,"class",j="button is-danger "+(r[1].transactions.creator.loading?"is-loading":"")),m(H,"class","transaction-creator__footer creator__footer"),m(e,"class","account-see__transaction-creator transaction-creator creator")},m(B,F){U(B,e,F),c(e,t),c(t,n),c(n,a),c(a,l),c(n,s),c(n,o),c(o,i),c(i,u),c(u,h),c(i,f),c(f,_),xe(i,r[1].transactions.creator.t.transactionType),c(t,v),c(t,p),c(p,w),c(w,y),c(p,$),c(p,C),ce(C,r[1].transactions.creator.t.amount),c(t,N),c(t,S),c(S,k),c(k,T),c(S,O),c(S,M),ce(M,r[1].transactions.creator.t.note),c(e,R),c(e,H),c(H,Y),c(Y,Q),c(H,ee),c(H,le),c(le,se),te||(he=[K(i,"change",r[7]),K(i,"change",Ua),K(C,"input",r[8]),K(M,"input",r[9]),K(Y,"click",r[10]),K(le,"click",r[11])],te=!0)},p(B,F){F&2&&xe(i,B[1].transactions.creator.t.transactionType),F&2&&Oe(C.value)!==B[1].transactions.creator.t.amount&&ce(C,B[1].transactions.creator.t.amount),F&2&&M.value!==B[1].transactions.creator.t.note&&ce(M,B[1].transactions.creator.t.note),F&2&&W!==(W="button "+(B[1].transactions.creator.loading?"is-loading":""))&&m(Y,"class",W),F&2&&j!==(j="button is-danger "+(B[1].transactions.creator.loading?"is-loading":""))&&m(le,"class",j)},d(B){B&&d(e),te=!1,Se(he)}}}function Va(r){let e,t,n,a;return{c(){e=b("button"),t=P("New Transaction"),this.h()},l(l){e=g(l,"BUTTON",{class:!0});var s=E(e);t=V(s,"New Transaction"),s.forEach(d),this.h()},h(){m(e,"class","button")},m(l,s){U(l,e,s),c(e,t),n||(a=K(e,"click",r[3]),n=!0)},p:x,d(l){l&&d(e),n=!1,a()}}}function Aa(r){let e,t,n=r[0]!=null&&Dn(r);return{c(){n&&n.c(),e=ne()},l(a){n&&n.l(a),e=ne()},m(a,l){n&&n.m(a,l),U(a,e,l),t=!0},p(a,[l]){a[0]!=null?n?(n.p(a,l),l&1&&A(n,1)):(n=Dn(a),n.c(),A(n,1),n.m(e.parentNode,e)):n&&(ae(),L(n,1,1,()=>{n=null}),re())},i(a){t||(A(n),t=!0)},o(a){L(n),t=!1},d(a){n&&n.d(a),a&&d(e)}}}function Ua(r){r.target.value}function Ma(r){}function Oa(r,e,t){let{data:n}=e;const a={tabs:{list:[{title:"Account",active:!0,type:"main"},{title:"Transactions",type:"transactions"}],activeTab:"main"},transactions:{}};function l(w){a.tabs.list.forEach(y=>y.active=!1),w.active=!0,t(1,a.tabs.activeTab=w.type,a)}function s(){const y=new Date(Date.now()).toISOString().substring(0,10);t(1,a.transactions.creator={t:{transactionType:"add",amount:0,dateString:y}},a)}async function o(){const w=a.transactions.creator;w.loading=!0;try{const y=await Ca.addTransaction(n,w.t);n.payments?t(0,n.payments=[y.createdPayment,...n.payments],n):t(0,n.payments=[y.createdPayment],n),t(0,n.balance=y.balance,n),t(1,a.transactions.creator=void 0,a)}catch{w.loading=!1}}function i(){a.transactions.creator.t,t(1,a.transactions.creator=void 0,a)}const u=w=>l(w);function h(){a.transactions.creator.t.transactionType=Lt(this),t(1,a)}function f(){a.transactions.creator.t.amount=Oe(this.value),t(1,a)}function _(){a.transactions.creator.t.note=this.value,t(1,a)}const v=()=>o(),p=()=>i();return r.$$set=w=>{"data"in w&&t(0,n=w.data)},[n,a,l,s,o,i,u,h,f,_,v,p]}class Ft extends ue{constructor(e){super(),fe(this,e,Oa,Aa,de,{data:0})}}class Qt{}Re(Qt,"$channel",new Ht);function Vn(r,e,t){const n=r.slice();return n[5]=e[t],n}function Na(r){let e;return{c(){e=P("Loading payments...")},l(t){e=V(t,"Loading payments...")},m(t,n){U(t,e,n)},p:x,i:x,o:x,d(t){t&&d(e)}}}function La(r){let e,t,n,a,l,s,o,i,u,h,f,_,v,p,w,y,$=[],C=new Map,N,S,k=r[1]&&An(),T=r[0];const O=M=>M[5]._id+"//"+M[5].amount+"//"+M[5].dateString+M[5].note;for(let M=0;M<T.length;M+=1){let R=Vn(r,T,M),H=O(R);C.set(H,$[M]=Mn(H,R))}return{c(){e=b("div"),t=b("div"),n=P("Payments"),a=I(),l=b("div"),s=b("div"),o=b("div"),i=P("Amount"),u=I(),h=b("div"),f=P("Date"),_=I(),k&&k.c(),v=I(),p=b("div"),w=P("Notes"),y=I();for(let M=0;M<$.length;M+=1)$[M].c();this.h()},l(M){e=g(M,"DIV",{class:!0});var R=E(e);t=g(R,"DIV",{class:!0});var H=E(t);n=V(H,"Payments"),H.forEach(d),a=D(R),l=g(R,"DIV",{class:!0,role:!0});var Y=E(l);s=g(Y,"DIV",{class:!0,role:!0});var Q=E(s);o=g(Q,"DIV",{class:!0});var W=E(o);i=V(W,"Amount"),W.forEach(d),u=D(Q),h=g(Q,"DIV",{class:!0});var ee=E(h);f=V(ee,"Date"),ee.forEach(d),_=D(Q),k&&k.l(Q),v=D(Q),p=g(Q,"DIV",{class:!0});var le=E(p);w=V(le,"Notes"),le.forEach(d),Q.forEach(d),y=D(Y);for(let se=0;se<$.length;se+=1)$[se].l(Y);Y.forEach(d),R.forEach(d),this.h()},h(){m(t,"class","pay-table__title svelte-1y83l8o"),m(o,"class","pay-table__column svelte-1y83l8o"),m(h,"class","pay-table__column svelte-1y83l8o"),m(p,"class","pay-table__column svelte-1y83l8o"),m(s,"class","pay-table__header pay-table__row svelte-1y83l8o"),m(s,"role","rowgroup"),m(l,"class",N="pay-table__table "+(r[1]?"pay-table__table_4-columns":"pay-table__table_3-columns")+" svelte-1y83l8o"),m(l,"role","table"),m(e,"class","pay-table svelte-1y83l8o")},m(M,R){U(M,e,R),c(e,t),c(t,n),c(e,a),c(e,l),c(l,s),c(s,o),c(o,i),c(s,u),c(s,h),c(h,f),c(s,_),k&&k.m(s,null),c(s,v),c(s,p),c(p,w),c(l,y);for(let H=0;H<$.length;H+=1)$[H]&&$[H].m(l,null);S=!0},p(M,R){M[1]?k||(k=An(),k.c(),k.m(s,v)):k&&(k.d(1),k=null),R&7&&(T=M[0],ae(),$=Et($,R,O,1,M,T,C,l,Wt,Mn,null,Vn),re()),(!S||R&2&&N!==(N="pay-table__table "+(M[1]?"pay-table__table_4-columns":"pay-table__table_3-columns")+" svelte-1y83l8o"))&&m(l,"class",N)},i(M){if(!S){for(let R=0;R<T.length;R+=1)A($[R]);S=!0}},o(M){for(let R=0;R<$.length;R+=1)L($[R]);S=!1},d(M){M&&d(e),k&&k.d();for(let R=0;R<$.length;R+=1)$[R].d()}}}function An(r){let e,t;return{c(){e=b("div"),t=P("USD"),this.h()},l(n){e=g(n,"DIV",{class:!0});var a=E(e);t=V(a,"USD"),a.forEach(d),this.h()},h(){m(e,"class","pay-table__column svelte-1y83l8o")},m(n,a){U(n,e,a),c(e,t)},d(n){n&&d(e)}}}function Un(r){let e,t,n,a;const l=[Ra,Ba],s=[];function o(i,u){return i[5].usdAmount?0:1}return t=o(r),n=s[t]=l[t](r),{c(){e=b("div"),n.c(),this.h()},l(i){e=g(i,"DIV",{class:!0,role:!0});var u=E(e);n.l(u),u.forEach(d),this.h()},h(){m(e,"class","pay-table__column pay-table__usd svelte-1y83l8o"),m(e,"role","cell")},m(i,u){U(i,e,u),s[t].m(e,null),a=!0},p(i,u){let h=t;t=o(i),t===h?s[t].p(i,u):(ae(),L(s[h],1,1,()=>{s[h]=null}),re(),n=s[t],n?n.p(i,u):(n=s[t]=l[t](i),n.c()),A(n,1),n.m(e,null))},i(i){a||(A(n),a=!0)},o(i){L(n),a=!1},d(i){i&&d(e),s[t].d()}}}function Ba(r){let e;return{c(){e=P("Loading...")},l(t){e=V(t,"Loading...")},m(t,n){U(t,e,n)},p:x,i:x,o:x,d(t){t&&d(e)}}}function Ra(r){let e,t;return e=new Me({props:{value:r[5].usdAmount}}),{c(){q(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),t=!0},p(n,a){const l={};a&1&&(l.value=n[5].usdAmount),e.$set(l)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Mn(r,e){let t,n,a,l,s,o=e[5].dateString+"",i,u,h,f,_=(e[5].note??"-")+"",v,p,w,y,$;a=new Me({props:{value:e[5].amount}});let C=e[1]&&Un(e);function N(){return e[4](e[5])}return{key:r,first:null,c(){t=b("div"),n=b("div"),q(a.$$.fragment),l=I(),s=b("div"),i=P(o),u=I(),C&&C.c(),h=I(),f=b("div"),v=P(_),p=I(),this.h()},l(S){t=g(S,"DIV",{class:!0,role:!0});var k=E(t);n=g(k,"DIV",{class:!0,role:!0});var T=E(n);Z(a.$$.fragment,T),T.forEach(d),l=D(k),s=g(k,"DIV",{class:!0,role:!0});var O=E(s);i=V(O,o),O.forEach(d),u=D(k),C&&C.l(k),h=D(k),f=g(k,"DIV",{class:!0,role:!0});var M=E(f);v=V(M,_),M.forEach(d),p=D(k),k.forEach(d),this.h()},h(){m(n,"class","pay-table__column pay-table__amount svelte-1y83l8o"),m(n,"role","cell"),m(s,"class","pay-table__column pay-table__date svelte-1y83l8o"),m(s,"role","cell"),m(f,"class","pay-table__column pay-table__note svelte-1y83l8o"),m(f,"role","cell"),m(t,"class","pay-table__row pay-table__row_clickable svelte-1y83l8o"),m(t,"role","rowgroup"),this.first=t},m(S,k){U(S,t,k),c(t,n),G(a,n,null),c(t,l),c(t,s),c(s,i),c(t,u),C&&C.m(t,null),c(t,h),c(t,f),c(f,v),c(t,p),w=!0,y||($=K(t,"click",N),y=!0)},p(S,k){e=S;const T={};k&1&&(T.value=e[5].amount),a.$set(T),(!w||k&1)&&o!==(o=e[5].dateString+"")&&z(i,o),e[1]?C?(C.p(e,k),k&2&&A(C,1)):(C=Un(e),C.c(),A(C,1),C.m(t,h)):C&&(ae(),L(C,1,1,()=>{C=null}),re()),(!w||k&1)&&_!==(_=(e[5].note??"-")+"")&&z(v,_)},i(S){w||(A(a.$$.fragment,S),A(C),w=!0)},o(S){L(a.$$.fragment,S),L(C),w=!1},d(S){S&&d(t),J(a),C&&C.d(),y=!1,$()}}}function Wa(r){let e,t,n,a;const l=[La,Na],s=[];function o(i,u){return i[0]?0:1}return e=o(r),t=s[e]=l[e](r),{c(){t.c(),n=ne()},l(i){t.l(i),n=ne()},m(i,u){s[e].m(i,u),U(i,n,u),a=!0},p(i,[u]){let h=e;e=o(i),e===h?s[e].p(i,u):(ae(),L(s[h],1,1,()=>{s[h]=null}),re(),t=s[e],t?t.p(i,u):(t=s[e]=l[e](i),t.c()),A(t,1),t.m(n.parentNode,n))},i(i){a||(A(t),a=!0)},o(i){L(t),a=!1},d(i){s[e].d(i),i&&d(n)}}}function ja(r,e,t){let{onRowClicked:n}=e,{payments:a}=e,{showUsdColumn:l}=e;function s(i){n(i)}const o=i=>s(i);return r.$$set=i=>{"onRowClicked"in i&&t(3,n=i.onRowClicked),"payments"in i&&t(0,a=i.payments),"showUsdColumn"in i&&t(1,l=i.showUsdColumn)},[a,l,s,n,o]}class bl extends ue{constructor(e){super(),fe(this,e,ja,Wa,de,{onRowClicked:3,payments:0,showUsdColumn:1})}}function On(r){let e,t,n,a,l,s,o,i,u,h,f,_,v,p,w,y,$,C,N=r[0]&&Nn(r);return{c(){e=b("div"),N&&N.c(),t=I(),n=b("input"),a=I(),l=b("input"),s=I(),o=b("input"),i=I(),u=b("div"),h=b("button"),f=P("Confirm"),v=I(),p=b("button"),w=P("Cancel"),this.h()},l(S){e=g(S,"DIV",{class:!0});var k=E(e);N&&N.l(k),t=D(k),n=g(k,"INPUT",{type:!0,class:!0,placeholder:!0}),a=D(k),l=g(k,"INPUT",{class:!0,type:!0,placeholder:!0}),s=D(k),o=g(k,"INPUT",{class:!0,type:!0,placeholder:!0}),i=D(k),u=g(k,"DIV",{class:!0});var T=E(u);h=g(T,"BUTTON",{class:!0});var O=E(h);f=V(O,"Confirm"),O.forEach(d),v=D(T),p=g(T,"BUTTON",{class:!0});var M=E(p);w=V(M,"Cancel"),M.forEach(d),T.forEach(d),k.forEach(d),this.h()},h(){m(n,"type","date"),m(n,"class","input"),m(n,"placeholder","Date"),m(l,"class","input"),m(l,"type","number"),m(l,"placeholder","Amount"),m(o,"class","input"),m(o,"type","text"),m(o,"placeholder","Note"),m(h,"class",_="button "+(r[1].loading?"is-loading":"")),p.disabled=y=r[1].loading,m(p,"class","button is-danger"),m(u,"class","pay-window__footer svelte-og27j9"),m(e,"class","pay-window")},m(S,k){U(S,e,k),N&&N.m(e,null),c(e,t),c(e,n),ce(n,r[1].payment.dateString),c(e,a),c(e,l),ce(l,r[1].payment.amount),c(e,s),c(e,o),ce(o,r[1].payment.note),c(e,i),c(e,u),c(u,h),c(h,f),c(u,v),c(u,p),c(p,w),$||(C=[K(n,"input",r[9]),K(l,"input",r[10]),K(o,"input",r[11]),K(h,"click",r[2]),K(p,"click",r[3])],$=!0)},p(S,k){S[0]?N?N.p(S,k):(N=Nn(S),N.c(),N.m(e,t)):N&&(N.d(1),N=null),k&2&&ce(n,S[1].payment.dateString),k&2&&Oe(l.value)!==S[1].payment.amount&&ce(l,S[1].payment.amount),k&2&&o.value!==S[1].payment.note&&ce(o,S[1].payment.note),k&2&&_!==(_="button "+(S[1].loading?"is-loading":""))&&m(h,"class",_),k&2&&y!==(y=S[1].loading)&&(p.disabled=y)},d(S){S&&d(e),N&&N.d(),$=!1,Se(C)}}}function Nn(r){let e,t,n,a,l,s,o,i;return{c(){e=b("div"),t=b("div"),n=P("Editing Payment"),a=I(),l=b("button"),s=P("Delete"),this.h()},l(u){e=g(u,"DIV",{class:!0});var h=E(e);t=g(h,"DIV",{class:!0});var f=E(t);n=V(f,"Editing Payment"),f.forEach(d),a=D(h),l=g(h,"BUTTON",{class:!0});var _=E(l);s=V(_,"Delete"),_.forEach(d),h.forEach(d),this.h()},h(){m(t,"class","pay-window__editing-title"),m(l,"class","button"),m(e,"class","pay-window__editing-header svelte-og27j9")},m(u,h){U(u,e,h),c(e,t),c(t,n),c(e,a),c(e,l),c(l,s),o||(i=K(l,"click",r[4]),o=!0)},p:x,d(u){u&&d(e),o=!1,i()}}}function Ha(r){let e,t=r[1]&&On(r);return{c(){t&&t.c(),e=ne()},l(n){t&&t.l(n),e=ne()},m(n,a){t&&t.m(n,a),U(n,e,a)},p(n,[a]){n[1]?t?t.p(n,a):(t=On(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:x,o:x,d(n){t&&t.d(n),n&&d(e)}}}function Ya(r,e,t){let{defaultAmount:n=0}=e,{editedPayment:a}=e,{onConfirm:l}=e,{onCancel:s}=e,{onDelete:o}=e,i;je(()=>{if(a)t(1,i={payment:{...a}});else{const y=new Date(Date.now()).toISOString().substring(0,10);t(1,i={payment:{dateString:y,amount:n}})}});function u(){t(1,i.loading=!0,i),l(i.payment)}function h(){s(i.payment)}function f(){o(a)}function _(){i.payment.dateString=this.value,t(1,i)}function v(){i.payment.amount=Oe(this.value),t(1,i)}function p(){i.payment.note=this.value,t(1,i)}return r.$$set=w=>{"defaultAmount"in w&&t(5,n=w.defaultAmount),"editedPayment"in w&&t(0,a=w.editedPayment),"onConfirm"in w&&t(6,l=w.onConfirm),"onCancel"in w&&t(7,s=w.onCancel),"onDelete"in w&&t(8,o=w.onDelete)},[a,i,u,h,f,n,l,s,o,_,v,p]}class gl extends ue{constructor(e){super(),fe(this,e,Ya,Ha,de,{defaultAmount:5,editedPayment:0,onConfirm:6,onCancel:7,onDelete:8})}}class Ye{static getPayTable(e,t,n){if(e&&e.length){if(!n){const a=[...e],l=t==="ars";return l&&a.forEach(s=>{Ze.arsToUsdOnDate(s.amount,s.dateString).then(o=>{s.usdAmount=o})}),{payments:a,show:!0,showUsdColumn:l}}return{...n,show:!0}}}static async addPayment(e,t,n,a){const l=!n.editedPayment;n.saving=!0;let s;l?s=await Ue.addPayment(e._id,t):s=await Ue.updatePayment(e._id,t),n.saving=!1,e.payments||(e.payments=[]),l?(e.payments.unshift(s),e.payments=e.payments.sort((o,i)=>o.date>i.date?-1:o.date<i.date?1:0),a&&a.payments&&(a.payments.unshift(s),a.payments=a.payments.sort((o,i)=>o.dateString>i.dateString?-1:o.dateString<i.dateString?1:0))):(n.editedPayment.amount=s.amount,n.editedPayment.dateString=s.dateString,n.editedPayment.note=s.note)}static getLastPayment(e){let t;for(const n of e){const a=new Date(n.dateString);(!t||a>t.date)&&(t={date:a,payment:n})}if(t)return t.payment}}function Ln(r){let e,t,n=r[1].payInfo+"",a,l,s,o,i,u,h=r[1].payStatus&&Bn(r),f=r[1].payTable&&r[1].payTable.show&&Rn(r),_=r[1].payWindow&&Wn(r),v=r[1].showPayButton&&jn(r);return{c(){e=b("div"),t=b("div"),a=P(n),l=I(),h&&h.c(),s=I(),f&&f.c(),o=I(),_&&_.c(),i=I(),v&&v.c(),this.h()},l(p){e=g(p,"DIV",{class:!0});var w=E(e);t=g(w,"DIV",{});var y=E(t);a=V(y,n),y.forEach(d),l=D(w),h&&h.l(w),s=D(w),f&&f.l(w),o=D(w),_&&_.l(w),i=D(w),v&&v.l(w),w.forEach(d),this.h()},h(){m(e,"class","debt-see svelte-7eluyi")},m(p,w){U(p,e,w),c(e,t),c(t,a),c(e,l),h&&h.m(e,null),c(e,s),f&&f.m(e,null),c(e,o),_&&_.m(e,null),c(e,i),v&&v.m(e,null),u=!0},p(p,w){(!u||w&2)&&n!==(n=p[1].payInfo+"")&&z(a,n),p[1].payStatus?h?(h.p(p,w),w&2&&A(h,1)):(h=Bn(p),h.c(),A(h,1),h.m(e,s)):h&&(ae(),L(h,1,1,()=>{h=null}),re()),p[1].payTable&&p[1].payTable.show?f?(f.p(p,w),w&2&&A(f,1)):(f=Rn(p),f.c(),A(f,1),f.m(e,o)):f&&(ae(),L(f,1,1,()=>{f=null}),re()),p[1].payWindow?_?(_.p(p,w),w&2&&A(_,1)):(_=Wn(p),_.c(),A(_,1),_.m(e,i)):_&&(ae(),L(_,1,1,()=>{_=null}),re()),p[1].showPayButton?v?v.p(p,w):(v=jn(p),v.c(),v.m(e,null)):v&&(v.d(1),v=null)},i(p){u||(A(h),A(f),A(_),u=!0)},o(p){L(h),L(f),L(_),u=!1},d(p){p&&d(e),h&&h.d(),f&&f.d(),_&&_.d(),v&&v.d()}}}function Bn(r){let e,t=r[1].payStatus.statusString+"",n,a,l,s,o,i,u=r[0].currency+"",h,f;return l=new Me({props:{value:r[1].payStatus.amount}}),o=new Me({props:{value:r[1].payStatus.total}}),{c(){e=b("div"),n=P(t),a=I(),q(l.$$.fragment),s=P(" of "),q(o.$$.fragment),i=I(),h=P(u)},l(_){e=g(_,"DIV",{});var v=E(e);n=V(v,t),a=D(v),Z(l.$$.fragment,v),s=V(v," of "),Z(o.$$.fragment,v),i=D(v),h=V(v,u),v.forEach(d)},m(_,v){U(_,e,v),c(e,n),c(e,a),G(l,e,null),c(e,s),G(o,e,null),c(e,i),c(e,h),f=!0},p(_,v){(!f||v&2)&&t!==(t=_[1].payStatus.statusString+"")&&z(n,t);const p={};v&2&&(p.value=_[1].payStatus.amount),l.$set(p);const w={};v&2&&(w.value=_[1].payStatus.total),o.$set(w),(!f||v&1)&&u!==(u=_[0].currency+"")&&z(h,u)},i(_){f||(A(l.$$.fragment,_),A(o.$$.fragment,_),f=!0)},o(_){L(l.$$.fragment,_),L(o.$$.fragment,_),f=!1},d(_){_&&d(e),J(l),J(o)}}}function Rn(r){let e,t;return e=new bl({props:{payments:r[1].payTable.payments,showUsdColumn:r[1].payTable.showUsdColumn,onRowClicked:r[5]}}),{c(){q(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),t=!0},p(n,a){const l={};a&2&&(l.payments=n[1].payTable.payments),a&2&&(l.showUsdColumn=n[1].payTable.showUsdColumn),e.$set(l)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Wn(r){let e,t;return e=new gl({props:{editedPayment:r[1].payWindow.editedPayment,defaultAmount:r[1].payWindow.defaultAmount,onConfirm:r[3],onCancel:r[2],onDelete:r[6]}}),{c(){q(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),t=!0},p(n,a){const l={};a&2&&(l.editedPayment=n[1].payWindow.editedPayment),a&2&&(l.defaultAmount=n[1].payWindow.defaultAmount),e.$set(l)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function jn(r){let e,t,n,a;return{c(){e=b("button"),t=P("Register payment"),this.h()},l(l){e=g(l,"BUTTON",{class:!0});var s=E(e);t=V(s,"Register payment"),s.forEach(d),this.h()},h(){m(e,"class","button")},m(l,s){U(l,e,s),c(e,t),n||(a=K(e,"click",r[4]),n=!0)},p:x,d(l){l&&d(e),n=!1,a()}}}function Ka(r){let e,t,n=r[1]!=null&&Ln(r);return{c(){n&&n.c(),e=ne()},l(a){n&&n.l(a),e=ne()},m(a,l){n&&n.m(a,l),U(a,e,l),t=!0},p(a,[l]){a[1]!=null?n?(n.p(a,l),l&2&&A(n,1)):(n=Ln(a),n.c(),A(n,1),n.m(e.parentNode,e)):n&&(ae(),L(n,1,1,()=>{n=null}),re())},i(a){t||(A(n),t=!0)},o(a){L(n),t=!1},d(a){n&&n.d(a),a&&d(e)}}}function Fa(r,e,t){let{data:n}=e;const a=ot();let l={},s;je(()=>{s=Qt.$channel.subscribe(p=>{p.type==="itemEdited"&&o()}),o()}),Pl(()=>{s&&s.unsubscribe()});function o(){const p=ze.getPaidAmount(n),w=p>=n.amount;t(1,l.showPayButton=!w,l),t(1,l.payInfo=ze.calculatePayStateString(n),l),n.description&&n.description.length>0&&t(1,l.payInfo+=` ${n.description}`,l),t(1,l.payTable=Ye.getPayTable(n.payments,n.currency,l.payTable),l),t(1,l.payStatus={isPaid:w,amount:n.theyPayMe&&w||w?p:n.amount-p,total:n.amount,statusString:ze.calculatePayStateString(n)},l)}function i(){t(1,l.payWindow=void 0,l),t(1,l.showPayButton=!0,l),l.payTable&&t(1,l.payTable.show=!0,l)}async function u(p){const w=l.payWindow;try{await Ye.addPayment(n,p,w,l.payTable),o(),t(1,l.payWindow=void 0,l),h()}catch(y){console.error(y),w.saving=!1}}function h(){a("update",n)}function f(){t(1,l.showPayButton=!1,l),t(1,l.payWindow={defaultAmount:ze.getOwedAmountOrZero(n)},l)}function _(p){t(1,l.payTable.show=!1,l),t(1,l.payWindow={editedPayment:p,defaultAmount:p.amount},l),t(1,l.showPayButton=!1,l)}function v(){const p=l.payWindow.editedPayment;n.payments.splice(n.payments.indexOf(p),1),Ue.update(n._id,{payments:n.payments}),t(1,l.payWindow=void 0,l),o()}return r.$$set=p=>{"data"in p&&t(0,n=p.data)},[n,l,i,u,f,_,v]}class wl extends ue{constructor(e){super(),fe(this,e,Fa,Ka,de,{data:0})}}function Hn(r,e,t){const n=r.slice();return n[13]=e[t],n}function Yn(r){let e,t,n,a,l,s,o=r[1].tabs.show&&Kn(r),i=r[1].tabs.activeTab==="main"&&Qn(r),u=r[1].tabs.activeTab==="payments"&&r[1].payTable&&r[1].payTable.show&&Jn(r),h=r[1].payWindow&&zn(r),f=r[1].showPayButton&&Zn(r);return{c(){e=b("div"),o&&o.c(),t=I(),i&&i.c(),n=I(),u&&u.c(),a=I(),h&&h.c(),l=I(),f&&f.c(),this.h()},l(_){e=g(_,"DIV",{class:!0});var v=E(e);o&&o.l(v),t=D(v),i&&i.l(v),n=D(v),u&&u.l(v),a=D(v),h&&h.l(v),l=D(v),f&&f.l(v),v.forEach(d),this.h()},h(){m(e,"class","service-see svelte-1ws6a5a")},m(_,v){U(_,e,v),o&&o.m(e,null),c(e,t),i&&i.m(e,null),c(e,n),u&&u.m(e,null),c(e,a),h&&h.m(e,null),c(e,l),f&&f.m(e,null),s=!0},p(_,v){_[1].tabs.show?o?o.p(_,v):(o=Kn(_),o.c(),o.m(e,t)):o&&(o.d(1),o=null),_[1].tabs.activeTab==="main"?i?i.p(_,v):(i=Qn(_),i.c(),i.m(e,n)):i&&(i.d(1),i=null),_[1].tabs.activeTab==="payments"&&_[1].payTable&&_[1].payTable.show?u?(u.p(_,v),v&2&&A(u,1)):(u=Jn(_),u.c(),A(u,1),u.m(e,a)):u&&(ae(),L(u,1,1,()=>{u=null}),re()),_[1].payWindow?h?(h.p(_,v),v&2&&A(h,1)):(h=zn(_),h.c(),A(h,1),h.m(e,l)):h&&(ae(),L(h,1,1,()=>{h=null}),re()),_[1].showPayButton?f?f.p(_,v):(f=Zn(_),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(_){s||(A(u),A(h),s=!0)},o(_){L(u),L(h),s=!1},d(_){_&&d(e),o&&o.d(),i&&i.d(),u&&u.d(),h&&h.d(),f&&f.d()}}}function Kn(r){let e,t,n=r[1].tabs.list,a=[];for(let l=0;l<n.length;l+=1)a[l]=Fn(Hn(r,n,l));return{c(){e=b("div"),t=b("ul");for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){e=g(l,"DIV",{class:!0});var s=E(e);t=g(s,"UL",{});var o=E(t);for(let i=0;i<a.length;i+=1)a[i].l(o);o.forEach(d),s.forEach(d),this.h()},h(){m(e,"class","see-tabs tabs")},m(l,s){U(l,e,s),c(e,t);for(let o=0;o<a.length;o+=1)a[o]&&a[o].m(t,null)},p(l,s){if(s&130){n=l[1].tabs.list;let o;for(o=0;o<n.length;o+=1){const i=Hn(l,n,o);a[o]?a[o].p(i,s):(a[o]=Fn(i),a[o].c(),a[o].m(t,null))}for(;o<a.length;o+=1)a[o].d(1);a.length=n.length}},d(l){l&&d(e),Rt(a,l)}}}function Fn(r){let e,t,n=r[13].title+"",a,l,s,o,i;function u(){return r[9](r[13])}return{c(){e=b("li"),t=b("a"),a=P(n),l=I(),this.h()},l(h){e=g(h,"LI",{class:!0});var f=E(e);t=g(f,"A",{});var _=E(t);a=V(_,n),_.forEach(d),l=D(f),f.forEach(d),this.h()},h(){m(e,"class",s=r[13].active?"is-active":"")},m(h,f){U(h,e,f),c(e,t),c(t,a),c(e,l),o||(i=K(t,"click",u),o=!0)},p(h,f){r=h,f&2&&n!==(n=r[13].title+"")&&z(a,n),f&2&&s!==(s=r[13].active?"is-active":"")&&m(e,"class",s)},d(h){h&&d(e),o=!1,i()}}}function Qn(r){let e,t,n=r[0].name+"",a,l,s,o=r[0].cost+"",i,u,h=r[0].currency+"",f,_,v,p=r[1].lastPayment&&qn(r),w=r[1].showChangePaidDateButton&&Gn(r);return{c(){e=b("div"),t=b("div"),a=P(n),l=I(),s=b("div"),i=P(o),u=I(),f=P(h),_=I(),p&&p.c(),v=I(),w&&w.c(),this.h()},l(y){e=g(y,"DIV",{class:!0});var $=E(e);t=g($,"DIV",{});var C=E(t);a=V(C,n),C.forEach(d),l=D($),s=g($,"DIV",{});var N=E(s);i=V(N,o),u=D(N),f=V(N,h),N.forEach(d),_=D($),p&&p.l($),v=D($),w&&w.l($),$.forEach(d),this.h()},h(){m(e,"class","service-see__body svelte-1ws6a5a")},m(y,$){U(y,e,$),c(e,t),c(t,a),c(e,l),c(e,s),c(s,i),c(s,u),c(s,f),c(e,_),p&&p.m(e,null),c(e,v),w&&w.m(e,null)},p(y,$){$&1&&n!==(n=y[0].name+"")&&z(a,n),$&1&&o!==(o=y[0].cost+"")&&z(i,o),$&1&&h!==(h=y[0].currency+"")&&z(f,h),y[1].lastPayment?p?p.p(y,$):(p=qn(y),p.c(),p.m(e,v)):p&&(p.d(1),p=null),y[1].showChangePaidDateButton?w?w.p(y,$):(w=Gn(y),w.c(),w.m(e,null)):w&&(w.d(1),w=null)},d(y){y&&d(e),p&&p.d(),w&&w.d()}}}function qn(r){let e,t,n,a,l,s=r[1].lastPayment.dateString+"",o;return{c(){e=b("div"),t=b("div"),n=P("Last pay date:"),a=I(),l=b("div"),o=P(s),this.h()},l(i){e=g(i,"DIV",{class:!0});var u=E(e);t=g(u,"DIV",{class:!0});var h=E(t);n=V(h,"Last pay date:"),h.forEach(d),a=D(u),l=g(u,"DIV",{class:!0});var f=E(l);o=V(f,s),f.forEach(d),u.forEach(d),this.h()},h(){m(t,"class","value-label"),m(l,"class","value"),m(e,"class","label-and-value svelte-1ws6a5a")},m(i,u){U(i,e,u),c(e,t),c(t,n),c(e,a),c(e,l),c(l,o)},p(i,u){u&2&&s!==(s=i[1].lastPayment.dateString+"")&&z(o,s)},d(i){i&&d(e)}}}function Gn(r){let e,t,n,a;return{c(){e=b("button"),t=P("Change Date"),this.h()},l(l){e=g(l,"BUTTON",{class:!0});var s=E(e);t=V(s,"Change Date"),s.forEach(d),this.h()},h(){m(e,"class","button")},m(l,s){U(l,e,s),c(e,t),n||(a=K(e,"click",r[3]),n=!0)},p:x,d(l){l&&d(e),n=!1,a()}}}function Jn(r){let e,t;return e=new bl({props:{payments:r[1].payTable.payments,showUsdColumn:r[1].payTable.showUsdColumn,onRowClicked:r[8]}}),{c(){q(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),t=!0},p(n,a){const l={};a&2&&(l.payments=n[1].payTable.payments),a&2&&(l.showUsdColumn=n[1].payTable.showUsdColumn),e.$set(l)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function zn(r){let e,t;return e=new gl({props:{editedPayment:r[1].payWindow.editedPayment,defaultAmount:r[1].payWindow.defaultAmount,onConfirm:r[4],onCancel:r[5],onDelete:r[6]}}),{c(){q(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),t=!0},p(n,a){const l={};a&2&&(l.editedPayment=n[1].payWindow.editedPayment),a&2&&(l.defaultAmount=n[1].payWindow.defaultAmount),e.$set(l)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Zn(r){let e,t,n,a;return{c(){e=b("button"),t=P("Register Payment"),this.h()},l(l){e=g(l,"BUTTON",{class:!0});var s=E(e);t=V(s,"Register Payment"),s.forEach(d),this.h()},h(){m(e,"class","button")},m(l,s){U(l,e,s),c(e,t),n||(a=K(e,"click",r[2]),n=!0)},p:x,d(l){l&&d(e),n=!1,a()}}}function Qa(r){let e,t,n=r[1]&&Yn(r);return{c(){n&&n.c(),e=ne()},l(a){n&&n.l(a),e=ne()},m(a,l){n&&n.m(a,l),U(a,e,l),t=!0},p(a,[l]){a[1]?n?(n.p(a,l),l&2&&A(n,1)):(n=Yn(a),n.c(),A(n,1),n.m(e.parentNode,e)):n&&(ae(),L(n,1,1,()=>{n=null}),re())},i(a){t||(A(n),t=!0)},o(a){L(n),t=!1},d(a){n&&n.d(a),a&&d(e)}}}function qa(r,e,t){let{data:n}=e;const a=ot();let l={tabs:{list:[{title:"Service",active:!0,type:"main"},{title:"Payments",type:"payments"}],activeTab:"main"}};je(()=>{s()});function s(){if(n.isManual){if(n.payments){t(1,l.lastPayment=Ye.getLastPayment(n.payments),l);const y=Dt.wasThisMonthPaid(n);t(1,l.showPayButton=!y,l),t(1,l.showChangePaidDateButton=y,l)}else t(1,l.showPayButton=!0,l);t(1,l.payTable=Ye.getPayTable(n.payments,n.currency,l.payTable),l),t(1,l.tabs.show=n.payments&&n.payments.length>1,l)}}function o(){t(1,l.showPayButton=!1,l),t(1,l.payWindow={defaultAmount:n.cost},l)}function i(){t(1,l.showChangePaidDateButton=!1,l);const y=Ye.getLastPayment(n.payments);t(1,l.payWindow={editedPayment:y,defaultAmount:y.amount},l)}async function u(y){await Ye.addPayment(n,y,l.payWindow,l.payTable),t(1,l.payWindow=void 0,l),t(1,l.lastPayment=Ye.getLastPayment(n.payments),l),s(),h()}function h(){a("update",n)}function f(){t(1,l.payWindow=void 0,l),t(1,l.showPayButton=!0,l),l.payTable&&t(1,l.payTable.show=!0,l)}function _(){const y=l.payWindow.editedPayment;n.payments.splice(n.payments.indexOf(y),1),Ue.update(n._id,{payments:n.payments}),t(1,l.payWindow=void 0,l),s()}function v(y){l.tabs.list.forEach($=>$.active=!1),y.active=!0,t(1,l.tabs.activeTab=y.type,l)}function p(y){t(1,l.payTable.show=!1,l),t(1,l.payWindow={editedPayment:y,defaultAmount:y.amount},l),t(1,l.showPayButton=!1,l)}const w=y=>v(y);return r.$$set=y=>{"data"in y&&t(0,n=y.data)},[n,l,o,i,u,f,_,v,p,w]}class kl extends ue{constructor(e){super(),fe(this,e,qa,Qa,de,{data:0})}}function Xn(r){let e,t,n,a,l=r[0].currency+"",s,o,i,u,h,f=r[0].currency+"",_,v,p,w,y;return u=new Me({props:{value:r[0].total}}),{c(){e=b("div"),t=b("div"),n=P("This is the total of your accounts in "),a=b("strong"),s=P(l),o=I(),i=b("div"),q(u.$$.fragment),h=I(),_=P(f),v=I(),p=b("div"),w=P("You can delete this item if you want to delete the currency"),this.h()},l($){e=g($,"DIV",{class:!0});var C=E(e);t=g(C,"DIV",{});var N=E(t);n=V(N,"This is the total of your accounts in "),a=g(N,"STRONG",{});var S=E(a);s=V(S,l),S.forEach(d),N.forEach(d),o=D(C),i=g(C,"DIV",{class:!0});var k=E(i);Z(u.$$.fragment,k),h=D(k),_=V(k,f),k.forEach(d),v=D(C),p=g(C,"DIV",{});var T=E(p);w=V(T,"You can delete this item if you want to delete the currency"),T.forEach(d),C.forEach(d),this.h()},h(){m(i,"class","currency-total svelte-qphfhg"),m(e,"class","currency-see svelte-qphfhg")},m($,C){U($,e,C),c(e,t),c(t,n),c(t,a),c(a,s),c(e,o),c(e,i),G(u,i,null),c(i,h),c(i,_),c(e,v),c(e,p),c(p,w),y=!0},p($,C){(!y||C&1)&&l!==(l=$[0].currency+"")&&z(s,l);const N={};C&1&&(N.value=$[0].total),u.$set(N),(!y||C&1)&&f!==(f=$[0].currency+"")&&z(_,f)},i($){y||(A(u.$$.fragment,$),y=!0)},o($){L(u.$$.fragment,$),y=!1},d($){$&&d(e),J(u)}}}function Ga(r){let e,t,n=r[0]!=null&&Xn(r);return{c(){n&&n.c(),e=ne()},l(a){n&&n.l(a),e=ne()},m(a,l){n&&n.m(a,l),U(a,e,l),t=!0},p(a,[l]){a[0]!=null?n?(n.p(a,l),l&1&&A(n,1)):(n=Xn(a),n.c(),A(n,1),n.m(e.parentNode,e)):n&&(ae(),L(n,1,1,()=>{n=null}),re())},i(a){t||(A(n),t=!0)},o(a){L(n),t=!1},d(a){n&&n.d(a),a&&d(e)}}}function Ja(r,e,t){let{data:n}=e;return r.$$set=a=>{"data"in a&&t(0,n=a.data)},[n]}class El extends ue{constructor(e){super(),fe(this,e,Ja,Ga,de,{data:0})}}function za(r){let e,t,n,a,l,s,o,i,u,h;return{c(){e=b("div"),t=b("label"),n=P("Abbreviation"),a=I(),l=b("input"),s=I(),o=b("div"),i=P("The total will be calculated automatically with the sum of the account balances"),this.h()},l(f){e=g(f,"DIV",{class:!0});var _=E(e);t=g(_,"LABEL",{for:!0});var v=E(t);n=V(v,"Abbreviation"),v.forEach(d),a=D(_),l=g(_,"INPUT",{id:!0,class:!0}),_.forEach(d),s=D(f),o=g(f,"DIV",{class:!0});var p=E(o);i=V(p,"The total will be calculated automatically with the sum of the account balances"),p.forEach(d),this.h()},h(){m(t,"for","abbreviation-input"),m(l,"id","abbreviation-input"),m(l,"class","input-stretch"),m(e,"class","label-and-input"),m(o,"class","currency-info svelte-697qay")},m(f,_){U(f,e,_),c(e,t),c(t,n),c(e,a),c(e,l),ce(l,r[0].currency),U(f,s,_),U(f,o,_),c(o,i),u||(h=K(l,"input",r[1]),u=!0)},p(f,[_]){_&1&&l.value!==f[0].currency&&ce(l,f[0].currency)},i:x,o:x,d(f){f&&d(e),f&&d(s),f&&d(o),u=!1,h()}}}function Za(r,e,t){let{config:n}=e;function a(){n.currency=this.value,t(0,n)}return r.$$set=l=>{"config"in l&&t(0,n=l.config)},[n,a]}class Xa extends ue{constructor(e){super(),fe(this,e,Za,za,de,{config:0})}}const $l={account:"Create an Account to keep track of the balance of an specific bank account or wallet you want to track.",service:"Create a Service to keep track of something you need to pay every month. We will help you identify when was your last payment and the services you need to pay before the month ends.",debt:"Create a Debt to keep track of an amount someone owes you or that you owe to someone. You can mark it as paid when is time.",currency:"Create a Currency to organize your accounts by linking them to it, then you will be able to see the sum of all the accounts in the same currency."};class It{static getTypeString(){return"account"}static getListRender(){return yl}static getEditRender(){return Kt}static getSeeRender(){return Ft}static isItemOnQuery(e,t){return!1}}class kt extends It{static getTypeString(){return"account"}static getListRender(){return yl}static getEditRender(){return Kt}static getSeeRender(){return Ft}static isItemOnQuery(e,t){const n=t.toLowerCase(),a=e;return!!(a.name.toLowerCase().includes(n)||a.balance.toString().includes(t)||a.currency.toLowerCase().includes(t))}}class Dt extends It{static getTypeString(){return"service"}static getListRender(){return ya}static getEditRender(){return oa}static getSeeRender(){return kl}static isItemOnQuery(e,t){const n=t.toLowerCase(),a=e;return!!(a.name.toLowerCase().includes(n)||a.cost.toString().includes(t)||a.currency.toLowerCase().includes(t)||a.isManual&&t==="manual"||!a.isManual&&n==="auto")}static wasThisMonthPaid(e){if(!e.payments)return!1;const t=Ye.getLastPayment(e.payments);if(t!=null){const n=new Date,a=new Date(t.dateString.substring(0,10));return a!=null&&a.getMonth()===n.getMonth()&&a.getFullYear()===n.getFullYear()}return!1}}class Fe extends It{static getTypeString(){return"currency"}static getListRender(){return wa}static getEditRender(){return Xa}static getSeeRender(){return El}static calculate(e,t){t.total=0;for(let n=0;n<e.length;n++){const a=e[n];if(a.type===kt.getTypeString()){const l=a;l.currency===t.currency&&(t.total+=l.balance)}}}}class Tl extends It{static getTypeString(){return"debt"}static getListRender(){return pa}static getEditRender(){return ra}static getSeeRender(){return wl}static isItemOnQuery(e,t){const n=t.toLowerCase(),a=e;return!!(a.withWho.toLowerCase().includes(n)||a.amount.toString().includes(t)||a.currency.toLowerCase().includes(t))}}class at{static getClassByTypeString(e){const t=this.itemClasses.find(n=>n.getTypeString()===e);if(t!=null)return t}static isItemOnQuery(e,t){var a;const n=t.toLowerCase();return e._id.includes(t)||e.type.toLowerCase().includes(n)?!0:(a=this.getClassByTypeString(e.type))==null?void 0:a.isItemOnQuery(e,t)}static getItemClasses(){return this.itemClasses}}Re(at,"itemClasses",[kt,Dt,Tl,Fe]);function xn(r,e,t){const n=r.slice();return n[6]=e[t],n}function el(r){let e,t,n,a,l,s,o,i,u=[],h=new Map,f,_,v,p,w,y=!r[0]._id&&r[0].type&&tl(r),$=r[2].typeOptions;const C=k=>k[6];for(let k=0;k<$.length;k+=1){let T=xn(r,$,k),O=C(T);h.set(O,u[k]=nl(O,T))}var N=r[1];function S(k){return{props:{config:k[0]}}}return N&&(_=lt(N,S(r))),{c(){e=b("div"),y&&y.c(),t=I(),n=b("div"),a=b("label"),l=P("Type"),s=I(),o=b("div"),i=b("select");for(let k=0;k<u.length;k+=1)u[k].c();f=I(),_&&q(_.$$.fragment),this.h()},l(k){e=g(k,"DIV",{class:!0});var T=E(e);y&&y.l(T),t=D(T),n=g(T,"DIV",{class:!0});var O=E(n);a=g(O,"LABEL",{for:!0});var M=E(a);l=V(M,"Type"),M.forEach(d),s=D(O),o=g(O,"DIV",{class:!0});var R=E(o);i=g(R,"SELECT",{id:!0,class:!0});var H=E(i);for(let Y=0;Y<u.length;Y+=1)u[Y].l(H);H.forEach(d),R.forEach(d),O.forEach(d),f=D(T),_&&Z(_.$$.fragment,T),T.forEach(d),this.h()},h(){m(a,"for","type-input"),m(i,"id","type-input"),m(i,"class","w-100"),r[0].type===void 0&&Bt(()=>r[4].call(i)),m(o,"class","select input-stretch"),m(n,"class","label-and-input clickable-height"),m(e,"class","form")},m(k,T){U(k,e,T),y&&y.m(e,null),c(e,t),c(e,n),c(n,a),c(a,l),c(n,s),c(n,o),c(o,i);for(let O=0;O<u.length;O+=1)u[O]&&u[O].m(i,null);xe(i,r[0].type),c(e,f),_&&G(_,e,null),v=!0,p||(w=[K(i,"change",r[4]),K(i,"change",r[3])],p=!0)},p(k,T){!k[0]._id&&k[0].type?y?y.p(k,T):(y=tl(k),y.c(),y.m(e,t)):y&&(y.d(1),y=null),T&4&&($=k[2].typeOptions,u=Et(u,T,C,1,k,$,h,i,Vl,nl,null,xn)),T&5&&xe(i,k[0].type);const O={};if(T&1&&(O.config=k[0]),T&2&&N!==(N=k[1])){if(_){ae();const M=_;L(M.$$.fragment,1,0,()=>{J(M,1)}),re()}N?(_=lt(N,S(k)),q(_.$$.fragment),A(_.$$.fragment,1),G(_,e,null)):_=null}else N&&_.$set(O)},i(k){v||(_&&A(_.$$.fragment,k),v=!0)},o(k){_&&L(_.$$.fragment,k),v=!1},d(k){k&&d(e),y&&y.d();for(let T=0;T<u.length;T+=1)u[T].d();_&&J(_),p=!1,Se(w)}}}function tl(r){let e,t=r[2].help[r[0].type]+"",n;return{c(){e=b("div"),n=P(t),this.h()},l(a){e=g(a,"DIV",{class:!0});var l=E(e);n=V(l,t),l.forEach(d),this.h()},h(){m(e,"class","help-string svelte-14monhf")},m(a,l){U(a,e,l),c(e,n)},p(a,l){l&5&&t!==(t=a[2].help[a[0].type]+"")&&z(n,t)},d(a){a&&d(e)}}}function nl(r,e){let t,n=e[6]+"",a,l;return{key:r,first:null,c(){t=b("option"),a=P(n),this.h()},l(s){t=g(s,"OPTION",{});var o=E(t);a=V(o,n),o.forEach(d),this.h()},h(){t.__value=l=e[6],t.value=t.__value,this.first=t},m(s,o){U(s,t,o),c(t,a)},p(s,o){e=s,o&4&&n!==(n=e[6]+"")&&z(a,n),o&4&&l!==(l=e[6])&&(t.__value=l,t.value=t.__value)},d(s){s&&d(t)}}}function xa(r){let e,t,n=r[2]!=null&&el(r);return{c(){n&&n.c(),e=ne()},l(a){n&&n.l(a),e=ne()},m(a,l){n&&n.m(a,l),U(a,e,l),t=!0},p(a,[l]){a[2]!=null?n?(n.p(a,l),l&4&&A(n,1)):(n=el(a),n.c(),A(n,1),n.m(e.parentNode,e)):n&&(ae(),L(n,1,1,()=>{n=null}),re())},i(a){t||(A(n),t=!0)},o(a){L(n),t=!1},d(a){n&&n.d(a),a&&d(e)}}}function er(r,e,t){let{data:n}=e,a=Kt,l;je(()=>{t(2,l={typeOptions:at.getItemClasses().map(u=>u.getTypeString()),help:$l})});function s(u){const h=u.target.value;t(1,a=o(h)),t(0,n.type=h,n)}function o(u){return at.getClassByTypeString(u).getEditRender()}function i(){n.type=Lt(this),t(0,n),t(2,l)}return r.$$set=u=>{"data"in u&&t(0,n=u.data)},r.$$.update=()=>{r.$$.dirty&1&&t(1,a=o(n.type))},[n,a,l,s,i]}class Il extends ue{constructor(e){super(),fe(this,e,er,xa,de,{data:0})}}function tr(r){let e,t,n,a,l;var s=r[1];function o(i){return{props:{data:i[0]}}}return s&&(t=lt(s,o(r))),{c(){e=b("button"),t&&q(t.$$.fragment),this.h()},l(i){e=g(i,"BUTTON",{class:!0});var u=E(e);t&&Z(t.$$.fragment,u),u.forEach(d),this.h()},h(){m(e,"class","square white-button")},m(i,u){U(i,e,u),t&&G(t,e,null),n=!0,a||(l=K(e,"click",r[2]),a=!0)},p(i,[u]){const h={};if(u&1&&(h.data=i[0]),s!==(s=i[1])){if(t){ae();const f=t;L(f.$$.fragment,1,0,()=>{J(f,1)}),re()}s?(t=lt(s,o(i)),q(t.$$.fragment),A(t.$$.fragment,1),G(t,e,null)):t=null}else s&&t.$set(h)},i(i){n||(t&&A(t.$$.fragment,i),n=!0)},o(i){t&&L(t.$$.fragment,i),n=!1},d(i){i&&d(e),t&&J(t),a=!1,l()}}}function nr(r,e,t){let{data:n}=e,a=at.getClassByTypeString(n.type).getListRender();const l=ot();function s(){l("click",n)}return r.$$set=o=>{"data"in o&&t(0,n=o.data)},[n,a,s]}class lr extends ue{constructor(e){super(),fe(this,e,nr,tr,de,{data:0})}}function ar(r){let e,t,n;var a=r[1];function l(s){return{props:{data:s[0]}}}return a&&(e=lt(a,l(r)),e.$on("update",r[2])),{c(){e&&q(e.$$.fragment),t=ne()},l(s){e&&Z(e.$$.fragment,s),t=ne()},m(s,o){e&&G(e,s,o),U(s,t,o),n=!0},p(s,[o]){const i={};if(o&1&&(i.data=s[0]),a!==(a=s[1])){if(e){ae();const u=e;L(u.$$.fragment,1,0,()=>{J(u,1)}),re()}a?(e=lt(a,l(s)),e.$on("update",s[2]),q(e.$$.fragment),A(e.$$.fragment,1),G(e,t.parentNode,t)):e=null}else a&&e.$set(i)},i(s){n||(e&&A(e.$$.fragment,s),n=!0)},o(s){e&&L(e.$$.fragment,s),n=!1},d(s){s&&d(t),e&&J(e,s)}}}function rr(r,e,t){let{data:n}=e;const a=ot();let l=at.getClassByTypeString(n.type).getSeeRender();function s(o){a("update",o.detail)}return r.$$set=o=>{"data"in o&&t(0,n=o.data)},[n,l,s]}class sr extends ue{constructor(e){super(),fe(this,e,rr,ar,de,{data:0})}}const ir=r=>({}),ll=r=>({});function or(r){let e,t,n,a,l,s,o,i,u,h;const f=r[3].default,_=un(f,r,r[2],null),v=r[3].footer,p=un(v,r,r[2],ll);return{c(){e=b("div"),t=b("button"),n=I(),a=b("div"),l=b("div"),_&&_.c(),s=I(),o=b("div"),p&&p.c(),this.h()},l(w){e=g(w,"DIV",{class:!0});var y=E(e);t=g(y,"BUTTON",{class:!0}),E(t).forEach(d),n=D(y),a=g(y,"DIV",{class:!0});var $=E(a);l=g($,"DIV",{class:!0});var C=E(l);_&&_.l(C),C.forEach(d),s=D($),o=g($,"DIV",{class:!0});var N=E(o);p&&p.l(N),N.forEach(d),$.forEach(d),y.forEach(d),this.h()},h(){m(t,"class","modal-background svelte-9s1juy"),m(l,"class","modal-body svelte-9s1juy"),m(o,"class","modal-footer svelte-9s1juy"),m(a,"class","modal-content svelte-9s1juy"),m(e,"class","modal svelte-9s1juy")},m(w,y){U(w,e,y),c(e,t),c(e,n),c(e,a),c(a,l),_&&_.m(l,null),c(a,s),c(a,o),p&&p.m(o,null),i=!0,u||(h=[K(window,"keyup",r[0]),K(t,"click",r[1])],u=!0)},p(w,[y]){_&&_.p&&(!i||y&4)&&fn(_,f,w,w[2],i?hn(f,w[2],y,null):dn(w[2]),null),p&&p.p&&(!i||y&4)&&fn(p,v,w,w[2],i?hn(v,w[2],y,ir):dn(w[2]),ll)},i(w){i||(A(_,w),A(p,w),i=!0)},o(w){L(_,w),L(p,w),i=!1},d(w){w&&d(e),_&&_.d(w),p&&p.d(w),u=!1,Se(h)}}}function cr(r,e,t){let{$$slots:n={},$$scope:a}=e;const l=ot();function s(i){i.key==="Escape"?l("escapeKeyUp"):i.key==="Enter"&&l("enterKeyUp")}function o(){l("backgroundClick")}return r.$$set=i=>{"$$scope"in i&&t(2,a=i.$$scope)},[s,o,a,n]}class qt extends ue{constructor(e){super(),fe(this,e,cr,or,de,{})}}function Nt(r){return Array.isArray(r)?r.map(e=>Nt(e)):r instanceof Date?new Date(r.getTime()):r&&typeof r=="object"?Object.getOwnPropertyNames(r).reduce((e,t)=>(Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t)),e[t]=Nt(r[t]),e),Object.create(Object.getPrototypeOf(r))):r}function al(r,e,t){const n=r.slice();return n[26]=e[t],n}function ur(r){let e,t;return{c(){e=b("div"),t=P("Loading, please wait..."),this.h()},l(n){e=g(n,"DIV",{class:!0});var a=E(e);t=V(a,"Loading, please wait..."),a.forEach(d),this.h()},h(){m(e,"class","loading svelte-177u0ux")},m(n,a){U(n,e,a),c(e,t)},p:x,i:x,o:x,d(n){n&&d(e)}}}function fr(r){let e,t,n,a;const l=[hr,dr],s=[];function o(i,u){return i[1].list.length||i[0]?0:1}return e=o(r),t=s[e]=l[e](r),{c(){t.c(),n=ne()},l(i){t.l(i),n=ne()},m(i,u){s[e].m(i,u),U(i,n,u),a=!0},p(i,u){let h=e;e=o(i),e===h?s[e].p(i,u):(ae(),L(s[h],1,1,()=>{s[h]=null}),re(),t=s[e],t?t.p(i,u):(t=s[e]=l[e](i),t.c()),A(t,1),t.m(n.parentNode,n))},i(i){a||(A(t),a=!0)},o(i){L(t),a=!1},d(i){s[e].d(i),i&&d(n)}}}function dr(r){let e,t,n,a,l,s,o,i,u,h=r[1].help.account+"",f,_,v,p,w,y,$,C,N,S,k=r[1].help.service+"",T,O,M,R,H,Y,Q,W,ee,le,se=r[1].help.debt+"",j,te,he,B,F,X,oe,pe,ve,be,_e=r[1].help.currency+"",me,Ee,Ie,ge,De,$e;return{c(){e=b("div"),t=b("div"),n=P("Welcome, let's start creating your first Item, choose one of the following:"),a=I(),l=b("div"),s=b("div"),o=P("Account"),i=I(),u=b("div"),f=P(h),_=I(),v=b("button"),p=P("Create Account"),w=I(),y=b("div"),$=b("div"),C=P("Service"),N=I(),S=b("div"),T=P(k),O=I(),M=b("button"),R=P("Create Service"),H=I(),Y=b("div"),Q=b("div"),W=P("Debt"),ee=I(),le=b("div"),j=P(se),te=I(),he=b("button"),B=P("Create Debt"),F=I(),X=b("div"),oe=b("div"),pe=P("Currency"),ve=I(),be=b("div"),me=P(_e),Ee=I(),Ie=b("button"),ge=P("Create Currency"),this.h()},l(we){e=g(we,"DIV",{id:!0,class:!0});var ie=E(e);t=g(ie,"DIV",{id:!0,class:!0});var Qe=E(t);n=V(Qe,"Welcome, let's start creating your first Item, choose one of the following:"),Qe.forEach(d),a=D(ie),l=g(ie,"DIV",{});var Ve=E(l);s=g(Ve,"DIV",{class:!0});var Ce=E(s);o=V(Ce,"Account"),Ce.forEach(d),i=D(Ve),u=g(Ve,"DIV",{class:!0});var Ne=E(u);f=V(Ne,h),Ne.forEach(d),_=D(Ve),v=g(Ve,"BUTTON",{class:!0});var qe=E(v);p=V(qe,"Create Account"),qe.forEach(d),Ve.forEach(d),w=D(ie),y=g(ie,"DIV",{});var Ae=E(y);$=g(Ae,"DIV",{class:!0});var Le=E($);C=V(Le,"Service"),Le.forEach(d),N=D(Ae),S=g(Ae,"DIV",{class:!0});var Be=E(S);T=V(Be,k),Be.forEach(d),O=D(Ae),M=g(Ae,"BUTTON",{class:!0});var Ge=E(M);R=V(Ge,"Create Service"),Ge.forEach(d),Ae.forEach(d),H=D(ie),Y=g(ie,"DIV",{});var Pe=E(Y);Q=g(Pe,"DIV",{class:!0});var Je=E(Q);W=V(Je,"Debt"),Je.forEach(d),ee=D(Pe),le=g(Pe,"DIV",{class:!0});var rt=E(le);j=V(rt,se),rt.forEach(d),te=D(Pe),he=g(Pe,"BUTTON",{class:!0});var ye=E(he);B=V(ye,"Create Debt"),ye.forEach(d),Pe.forEach(d),F=D(ie),X=g(ie,"DIV",{});var Te=E(X);oe=g(Te,"DIV",{class:!0});var Ke=E(oe);pe=V(Ke,"Currency"),Ke.forEach(d),ve=D(Te),be=g(Te,"DIV",{class:!0});var st=E(be);me=V(st,_e),st.forEach(d),Ee=D(Te),Ie=g(Te,"BUTTON",{class:!0});var it=E(Ie);ge=V(it,"Create Currency"),it.forEach(d),Te.forEach(d),ie.forEach(d),this.h()},h(){m(t,"id","empty-state-welcome"),m(t,"class","svelte-177u0ux"),m(s,"class","title"),m(u,"class","description"),m(v,"class","button"),m($,"class","title"),m(S,"class","description"),m(M,"class","button"),m(Q,"class","title"),m(le,"class","description"),m(he,"class","button"),m(oe,"class","title"),m(be,"class","description"),m(Ie,"class","button"),m(e,"id","empty-state"),m(e,"class","svelte-177u0ux")},m(we,ie){U(we,e,ie),c(e,t),c(t,n),c(e,a),c(e,l),c(l,s),c(s,o),c(l,i),c(l,u),c(u,f),c(l,_),c(l,v),c(v,p),c(e,w),c(e,y),c(y,$),c($,C),c(y,N),c(y,S),c(S,T),c(y,O),c(y,M),c(M,R),c(e,H),c(e,Y),c(Y,Q),c(Q,W),c(Y,ee),c(Y,le),c(le,j),c(Y,te),c(Y,he),c(he,B),c(e,F),c(e,X),c(X,oe),c(oe,pe),c(X,ve),c(X,be),c(be,me),c(X,Ee),c(X,Ie),c(Ie,ge),De||($e=[K(v,"click",r[12]),K(M,"click",r[13]),K(he,"click",r[14]),K(Ie,"click",r[15])],De=!0)},p(we,ie){ie&2&&h!==(h=we[1].help.account+"")&&z(f,h),ie&2&&k!==(k=we[1].help.service+"")&&z(T,k),ie&2&&se!==(se=we[1].help.debt+"")&&z(j,se),ie&2&&_e!==(_e=we[1].help.currency+"")&&z(me,_e)},i:x,o:x,d(we){we&&d(e),De=!1,Se($e)}}}function hr(r){let e,t,n,a,l,s,o,i,u,h,f,_,v,p=[],w=new Map,y,$,C,N=r[1].list;const S=k=>k[26]._id+k[26].type+k[26].updateDate;for(let k=0;k<N.length;k+=1){let T=al(r,N,k),O=S(T);w.set(O,p[k]=rl(O,T))}return{c(){e=b("header"),t=b("div"),n=b("p"),a=b("input"),l=I(),s=b("span"),o=b("i"),i=I(),u=b("main"),h=b("button"),f=b("div"),_=P("Add"),v=I();for(let k=0;k<p.length;k+=1)p[k].c();this.h()},l(k){e=g(k,"HEADER",{id:!0,class:!0});var T=E(e);t=g(T,"DIV",{class:!0});var O=E(t);n=g(O,"P",{class:!0});var M=E(n);a=g(M,"INPUT",{class:!0}),l=D(M),s=g(M,"SPAN",{class:!0});var R=E(s);o=g(R,"I",{class:!0}),E(o).forEach(d),R.forEach(d),M.forEach(d),O.forEach(d),T.forEach(d),i=D(k),u=g(k,"MAIN",{id:!0,class:!0});var H=E(u);h=g(H,"BUTTON",{class:!0});var Y=E(h);f=g(Y,"DIV",{class:!0});var Q=E(f);_=V(Q,"Add"),Q.forEach(d),Y.forEach(d),v=D(H);for(let W=0;W<p.length;W+=1)p[W].l(H);H.forEach(d),this.h()},h(){m(a,"class","search-bar input"),m(o,"class","fa-solid fa-magnifying-glass"),m(s,"class","icon is-small is-left"),m(n,"class","control has-icons-left"),m(t,"class","field"),m(e,"id","header"),m(e,"class","svelte-177u0ux"),m(f,"class","title"),m(h,"class","square white-button"),m(u,"id","whiteboard"),m(u,"class","svelte-177u0ux")},m(k,T){U(k,e,T),c(e,t),c(t,n),c(n,a),c(n,l),c(n,s),c(s,o),U(k,i,T),U(k,u,T),c(u,h),c(h,f),c(f,_),c(u,v);for(let O=0;O<p.length;O+=1)p[O]&&p[O].m(u,null);y=!0,$||(C=[K(a,"input",r[11]),K(h,"click",r[2])],$=!0)},p(k,T){T&34&&(N=k[1].list,ae(),p=Et(p,T,S,1,k,N,w,u,Wt,rl,null,al),re())},i(k){if(!y){for(let T=0;T<N.length;T+=1)A(p[T]);y=!0}},o(k){for(let T=0;T<p.length;T+=1)L(p[T]);y=!1},d(k){k&&d(e),k&&d(i),k&&d(u);for(let T=0;T<p.length;T+=1)p[T].d();$=!1,Se(C)}}}function rl(r,e){let t,n,a;return n=new lr({props:{data:e[26]}}),n.$on("click",e[5]),{key:r,first:null,c(){t=ne(),q(n.$$.fragment),this.h()},l(l){t=ne(),Z(n.$$.fragment,l),this.h()},h(){this.first=t},m(l,s){U(l,t,s),G(n,l,s),a=!0},p(l,s){e=l;const o={};s&2&&(o.data=e[26]),n.$set(o)},i(l){a||(A(n.$$.fragment,l),a=!0)},o(l){L(n.$$.fragment,l),a=!1},d(l){l&&d(t),J(n,l)}}}function sl(r){let e,t;return e=new qt({props:{$$slots:{footer:[pr],default:[_r]},$$scope:{ctx:r}}}),e.$on("backgroundClick",r[4]),e.$on("escapeKeyUp",r[4]),e.$on("enterKeyUp",r[3]),{c(){q(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),t=!0},p(n,a){const l={};a&536870914&&(l.$$scope={dirty:a,ctx:n}),e.$set(l)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function _r(r){let e,t;return e=new Il({props:{data:r[1].creationModal.data}}),{c(){q(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),t=!0},p(n,a){const l={};a&2&&(l.data=n[1].creationModal.data),e.$set(l)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function pr(r){let e,t,n,a,l,s,o,i,u;return{c(){e=b("div"),t=b("button"),n=P("Save"),l=I(),s=b("button"),o=P("Cancel"),this.h()},l(h){e=g(h,"DIV",{slot:!0,class:!0});var f=E(e);t=g(f,"BUTTON",{class:!0});var _=E(t);n=V(_,"Save"),_.forEach(d),l=D(f),s=g(f,"BUTTON",{class:!0});var v=E(s);o=V(v,"Cancel"),v.forEach(d),f.forEach(d),this.h()},h(){m(t,"class",a="button is-primary "+(r[1].creationModal.saving?"is-loading":"")),m(s,"class","button"),m(e,"slot","footer"),m(e,"class","modal-footer-buttons svelte-177u0ux")},m(h,f){U(h,e,f),c(e,t),c(t,n),c(e,l),c(e,s),c(s,o),i||(u=[K(t,"click",r[3]),K(s,"click",r[4])],i=!0)},p(h,f){f&2&&a!==(a="button is-primary "+(h[1].creationModal.saving?"is-loading":""))&&m(t,"class",a)},d(h){h&&d(e),i=!1,Se(u)}}}function il(r){let e,t;return e=new qt({props:{$$slots:{footer:[vr],default:[mr]},$$scope:{ctx:r}}}),e.$on("backgroundClick",r[6]),e.$on("escapeKeyUp",r[6]),e.$on("enterKeyUp",r[6]),{c(){q(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),t=!0},p(n,a){const l={};a&536870914&&(l.$$scope={dirty:a,ctx:n}),e.$set(l)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function mr(r){let e,t;return e=new sr({props:{data:r[1].seeModal.item}}),e.$on("update",r[7]),{c(){q(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),t=!0},p(n,a){const l={};a&2&&(l.data=n[1].seeModal.item),e.$set(l)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function vr(r){let e,t,n,a,l,s,o,i,u,h,f,_;return{c(){e=b("div"),t=b("button"),n=P("Edit"),a=I(),l=b("button"),s=P("Delete"),i=I(),u=b("button"),h=P("Close"),this.h()},l(v){e=g(v,"DIV",{slot:!0,class:!0});var p=E(e);t=g(p,"BUTTON",{class:!0});var w=E(t);n=V(w,"Edit"),w.forEach(d),a=D(p),l=g(p,"BUTTON",{class:!0});var y=E(l);s=V(y,"Delete"),y.forEach(d),i=D(p),u=g(p,"BUTTON",{class:!0});var $=E(u);h=V($,"Close"),$.forEach(d),p.forEach(d),this.h()},h(){m(t,"class","button"),m(l,"class",o="button is-danger "+(r[1].seeModal.deleting?"is-loading":"")),m(u,"class","button"),m(e,"slot","footer"),m(e,"class","modal-footer-buttons svelte-177u0ux")},m(v,p){U(v,e,p),c(e,t),c(t,n),c(e,a),c(e,l),c(l,s),c(e,i),c(e,u),c(u,h),f||(_=[K(t,"click",r[8]),K(l,"click",r[16]),K(u,"click",r[6])],f=!0)},p(v,p){p&2&&o!==(o="button is-danger "+(v[1].seeModal.deleting?"is-loading":""))&&m(l,"class",o)},d(v){v&&d(e),f=!1,Se(_)}}}function ol(r){let e,t;return e=new qt({props:{$$slots:{footer:[br],default:[yr]},$$scope:{ctx:r}}}),e.$on("backgroundClick",r[10]),e.$on("escapeKeyUp",r[10]),{c(){q(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),t=!0},p(n,a){const l={};a&536870914&&(l.$$scope={dirty:a,ctx:n}),e.$set(l)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function yr(r){let e,t,n;function a(s){r[17](s)}let l={};return r[1].editModal.item!==void 0&&(l.data=r[1].editModal.item),e=new Il({props:l}),et.push(()=>tt(e,"data",a)),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,o){const i={};!t&&o&2&&(t=!0,i.data=s[1].editModal.item,nt(()=>t=!1)),e.$set(i)},i(s){n||(A(e.$$.fragment,s),n=!0)},o(s){L(e.$$.fragment,s),n=!1},d(s){J(e,s)}}}function br(r){let e,t,n,a,l,s,o,i,u;return{c(){e=b("div"),t=b("button"),n=P("Save"),l=I(),s=b("button"),o=P("Cancel"),this.h()},l(h){e=g(h,"DIV",{slot:!0,class:!0});var f=E(e);t=g(f,"BUTTON",{class:!0});var _=E(t);n=V(_,"Save"),_.forEach(d),l=D(f),s=g(f,"BUTTON",{class:!0});var v=E(s);o=V(v,"Cancel"),v.forEach(d),f.forEach(d),this.h()},h(){m(t,"class",a="button is-primary "+(r[1].editModal.saving?"is-loading":"")),m(s,"class","button"),m(e,"slot","footer"),m(e,"class","modal-footer-buttons svelte-177u0ux")},m(h,f){U(h,e,f),c(e,t),c(t,n),c(e,l),c(e,s),c(s,o),i||(u=[K(t,"click",r[9]),K(s,"click",r[10])],i=!0)},p(h,f){f&2&&a!==(a="button is-primary "+(h[1].editModal.saving?"is-loading":""))&&m(t,"class",a)},d(h){h&&d(e),i=!1,Se(u)}}}function gr(r){let e,t,n,a,l,s,o,i,u;const h=[fr,ur],f=[];function _(y,$){return y[1].list?0:1}n=_(r),a=f[n]=h[n](r);let v=r[1].creationModal&&sl(r),p=r[1].seeModal&&il(r),w=r[1].editModal&&ol(r);return{c(){e=I(),t=b("div"),a.c(),l=I(),v&&v.c(),s=I(),p&&p.c(),o=I(),w&&w.c(),i=ne(),this.h()},l(y){Al("svelte-bvgx4w",document.head).forEach(d),e=D(y),t=g(y,"DIV",{class:!0});var C=E(t);a.l(C),C.forEach(d),l=D(y),v&&v.l(y),s=D(y),p&&p.l(y),o=D(y),w&&w.l(y),i=ne(),this.h()},h(){document.title="Finances",m(t,"class","items svelte-177u0ux")},m(y,$){U(y,e,$),U(y,t,$),f[n].m(t,null),U(y,l,$),v&&v.m(y,$),U(y,s,$),p&&p.m(y,$),U(y,o,$),w&&w.m(y,$),U(y,i,$),u=!0},p(y,[$]){let C=n;n=_(y),n===C?f[n].p(y,$):(ae(),L(f[C],1,1,()=>{f[C]=null}),re(),a=f[n],a?a.p(y,$):(a=f[n]=h[n](y),a.c()),A(a,1),a.m(t,null)),y[1].creationModal?v?(v.p(y,$),$&2&&A(v,1)):(v=sl(y),v.c(),A(v,1),v.m(s.parentNode,s)):v&&(ae(),L(v,1,1,()=>{v=null}),re()),y[1].seeModal?p?(p.p(y,$),$&2&&A(p,1)):(p=il(y),p.c(),A(p,1),p.m(o.parentNode,o)):p&&(ae(),L(p,1,1,()=>{p=null}),re()),y[1].editModal?w?(w.p(y,$),$&2&&A(w,1)):(w=ol(y),w.c(),A(w,1),w.m(i.parentNode,i)):w&&(ae(),L(w,1,1,()=>{w=null}),re())},i(y){u||(A(a),A(v),A(p),A(w),u=!0)},o(y){L(a),L(v),L(p),L(w),u=!1},d(y){y&&d(e),y&&d(t),f[n].d(),y&&d(l),v&&v.d(y),y&&d(s),p&&p.d(y),y&&d(o),w&&w.d(y),y&&d(i)}}}function wr(r,e,t){let n=[],a="";const l={help:$l};let s;const o={getCurrencies:Xe.getCurrencies,onGoToCreation:H};Ul(Xe.contextKey,o),je(()=>{i(),Xe.currencyAddedSubject.subscribe({next:W=>{console.log(`Currency added received in items, currency: ${W}`)}})});function i(){Ue.getItems().then(W=>{n=W,S()})}function u(){const W=n.filter(ee=>ee.type===Fe.getTypeString());for(const ee of W)Fe.calculate(n,ee)}function h(){t(1,l.creationModal={data:{type:kt.getTypeString()}},l)}async function f(){if(l.creationModal){t(1,l.creationModal.saving=!0,l);try{let W;l.creationModal.data.type!="currency"?W=await Ue.create(l.creationModal.data):W=await Ze.create(l.creationModal.data),n=[W,...n],S(),u(),l.creationModal.data.type!==Fe.getTypeString()?_():(t(1,l.creationModal.saving=!1,l),Y())}catch(W){console.error(W),t(1,l.creationModal.saving=!1,l)}}}function _(){t(1,l.creationModal=void 0,l)}function v(W){t(1,l.seeModal={item:W.detail},l)}function p(){t(1,l.seeModal=void 0,l)}function w(W){W.detail.updateDate=new Date,u()}function y(){t(1,l.editModal={item:l.seeModal.item},l)}async function $(){if(l.editModal){t(1,l.editModal.saving=!0,l);try{const W=l.editModal.item,ee=await Ue.update(W._id,W);n=n.filter(le=>le._id===ee._id?ee:le),S(),u(),C(),Qt.$channel.next({type:"itemEdited",data:{item:W}})}catch(W){console.error(W),t(1,l.editModal.saving=!1,l)}}}function C(){u(),t(1,l.editModal=void 0,l)}function N(W){t(0,a=W.target.value),S()}function S(){t(1,l.list=n==null?void 0:n.filter(W=>at.isItemOnQuery(W,a)),l)}function k(){t(1,l.creationModal={data:{type:kt.getTypeString()}},l)}function T(){t(1,l.creationModal={data:{type:Dt.getTypeString()}},l)}function O(){t(1,l.creationModal={data:{type:Tl.getTypeString()}},l)}function M(){t(1,l.creationModal={data:{type:Fe.getTypeString()}},l)}async function R(){if(!l.seeModal)return;t(1,l.seeModal.deleting=!0,l);const W=l.seeModal.item;try{await Ue.delete(W._id),n=n.filter(ee=>ee._id!=W._id),u(),S(),p()}catch(ee){console.error(ee)}l.seeModal&&t(1,l.seeModal.deleting=!1,l)}function H(){l.creationModal==null?t(1,l.creationModal={data:{type:Fe.getTypeString()}},l):(s={creationModal:Nt(l.creationModal)},t(1,l.creationModal.data={type:Fe.getTypeString()},l))}function Y(){if(s!=null&&l.creationModal!=null&&s.creationModal!=null){const ee=l.creationModal.data.currency;t(1,l.creationModal=s.creationModal,l),t(1,l.creationModal.data.currency=ee,l),s=void 0}else _()}function Q(W){r.$$.not_equal(l.editModal.item,W)&&(l.editModal.item=W,t(1,l))}return[a,l,h,f,_,v,p,w,y,$,C,N,k,T,O,M,R,Q]}class kr extends ue{constructor(e){super(),fe(this,e,wr,gr,de,{})}}function Er(r){let e,t,n,a,l,s,o,i,u,h,f,_,v,p,w,y,$,C,N,S,k,T,O,M,R,H,Y,Q,W,ee,le,se,j,te,he,B,F,X,oe,pe,ve,be,_e,me,Ee,Ie,ge,De,$e,we,ie,Qe,Ve,Ce,Ne,qe,Ae,Le,Be,Ge,Pe,Je,rt;return y=new Ft({props:{data:r[0].examples.account}}),Y=new kl({props:{data:r[0].examples.service}}),X=new wl({props:{data:r[0].examples.debt}}),$e=new El({props:{data:r[0].examples.currency}}),{c(){e=b("div"),t=b("div"),n=b("p"),a=P("Welcome, I can help you remember about your finances."),l=I(),s=b("p"),o=P("Here are the things I can help you with:"),i=I(),u=b("div"),h=b("div"),f=b("h3"),_=P("Accounts"),v=I(),p=b("div"),w=b("div"),q(y.$$.fragment),$=I(),C=b("div"),N=P("You can have a list of all your accounts with their balance and currency"),S=I(),k=b("div"),T=b("h3"),O=P("Services"),M=I(),R=b("div"),H=b("div"),q(Y.$$.fragment),Q=I(),W=b("div"),ee=P(`You can store the services you need to pay every month, and see which ones you've already
					paid`),le=I(),se=b("div"),j=b("h3"),te=P("Debts"),he=I(),B=b("div"),F=b("div"),q(X.$$.fragment),oe=I(),pe=b("div"),ve=P("I can remind you of debts you need to pay or if someone owes you"),be=I(),_e=b("div"),me=b("h3"),Ee=P("Currencies"),Ie=I(),ge=b("div"),De=b("div"),q($e.$$.fragment),we=I(),ie=b("div"),Qe=P("You can create currencies and track the total sum of all the accounts in that currency."),Ve=I(),Ce=b("div"),Ne=b("div"),qe=P("Ready?"),Ae=I(),Le=b("a"),Be=b("button"),Ge=P("Start Now"),this.h()},l(ye){e=g(ye,"DIV",{class:!0});var Te=E(e);t=g(Te,"DIV",{class:!0});var Ke=E(t);n=g(Ke,"P",{class:!0});var st=E(n);a=V(st,"Welcome, I can help you remember about your finances."),st.forEach(d),l=D(Ke),s=g(Ke,"P",{class:!0});var it=E(s);o=V(it,"Here are the things I can help you with:"),it.forEach(d),Ke.forEach(d),i=D(Te),u=g(Te,"DIV",{class:!0});var He=E(u);h=g(He,"DIV",{class:!0});var ct=E(h);f=g(ct,"H3",{class:!0});var Gt=E(f);_=V(Gt,"Accounts"),Gt.forEach(d),v=D(ct),p=g(ct,"DIV",{class:!0});var ut=E(p);w=g(ut,"DIV",{class:!0});var Jt=E(w);Z(y.$$.fragment,Jt),Jt.forEach(d),$=D(ut),C=g(ut,"DIV",{class:!0});var zt=E(C);N=V(zt,"You can have a list of all your accounts with their balance and currency"),zt.forEach(d),ut.forEach(d),ct.forEach(d),S=D(He),k=g(He,"DIV",{class:!0});var ft=E(k);T=g(ft,"H3",{class:!0});var Zt=E(T);O=V(Zt,"Services"),Zt.forEach(d),M=D(ft),R=g(ft,"DIV",{class:!0});var dt=E(R);H=g(dt,"DIV",{class:!0});var Xt=E(H);Z(Y.$$.fragment,Xt),Xt.forEach(d),Q=D(dt),W=g(dt,"DIV",{class:!0});var xt=E(W);ee=V(xt,`You can store the services you need to pay every month, and see which ones you've already
					paid`),xt.forEach(d),dt.forEach(d),ft.forEach(d),le=D(He),se=g(He,"DIV",{class:!0});var ht=E(se);j=g(ht,"H3",{class:!0});var en=E(j);te=V(en,"Debts"),en.forEach(d),he=D(ht),B=g(ht,"DIV",{class:!0});var _t=E(B);F=g(_t,"DIV",{class:!0});var tn=E(F);Z(X.$$.fragment,tn),tn.forEach(d),oe=D(_t),pe=g(_t,"DIV",{class:!0});var nn=E(pe);ve=V(nn,"I can remind you of debts you need to pay or if someone owes you"),nn.forEach(d),_t.forEach(d),ht.forEach(d),be=D(He),_e=g(He,"DIV",{class:!0});var pt=E(_e);me=g(pt,"H3",{class:!0});var ln=E(me);Ee=V(ln,"Currencies"),ln.forEach(d),Ie=D(pt),ge=g(pt,"DIV",{class:!0});var mt=E(ge);De=g(mt,"DIV",{class:!0});var an=E(De);Z($e.$$.fragment,an),an.forEach(d),we=D(mt),ie=g(mt,"DIV",{class:!0});var rn=E(ie);Qe=V(rn,"You can create currencies and track the total sum of all the accounts in that currency."),rn.forEach(d),mt.forEach(d),pt.forEach(d),He.forEach(d),Ve=D(Te),Ce=g(Te,"DIV",{class:!0});var vt=E(Ce);Ne=g(vt,"DIV",{class:!0});var sn=E(Ne);qe=V(sn,"Ready?"),sn.forEach(d),Ae=D(vt),Le=g(vt,"A",{});var on=E(Le);Be=g(on,"BUTTON",{class:!0});var cn=E(Be);Ge=V(cn,"Start Now"),cn.forEach(d),on.forEach(d),vt.forEach(d),Te.forEach(d),this.h()},h(){m(n,"class","main-info svelte-14i3ig7"),m(s,"class","main-info svelte-14i3ig7"),m(t,"class","main-info-container svelte-14i3ig7"),m(f,"class","example-item-title svelte-14i3ig7"),m(w,"class","item-square svelte-14i3ig7"),m(C,"class","example-item-info"),m(p,"class","item-and-info svelte-14i3ig7"),m(h,"class","example-item"),m(T,"class","example-item-title svelte-14i3ig7"),m(H,"class","item-square svelte-14i3ig7"),m(W,"class","example-item-info"),m(R,"class","item-and-info svelte-14i3ig7"),m(k,"class","example-item"),m(j,"class","example-item-title svelte-14i3ig7"),m(F,"class","item-square svelte-14i3ig7"),m(pe,"class","example-item-info"),m(B,"class","item-and-info svelte-14i3ig7"),m(se,"class","example-item"),m(me,"class","example-item-title svelte-14i3ig7"),m(De,"class","item-square svelte-14i3ig7"),m(ie,"class","example-item-info"),m(ge,"class","item-and-info svelte-14i3ig7"),m(_e,"class","example-item"),m(u,"class","example-item-list svelte-14i3ig7"),m(Ne,"class","call-to-action-info"),m(Be,"class","call-to-action-button button is-primary"),m(Ce,"class","call-to-action svelte-14i3ig7"),m(e,"class","welcome svelte-14i3ig7")},m(ye,Te){U(ye,e,Te),c(e,t),c(t,n),c(n,a),c(t,l),c(t,s),c(s,o),c(e,i),c(e,u),c(u,h),c(h,f),c(f,_),c(h,v),c(h,p),c(p,w),G(y,w,null),c(p,$),c(p,C),c(C,N),c(u,S),c(u,k),c(k,T),c(T,O),c(k,M),c(k,R),c(R,H),G(Y,H,null),c(R,Q),c(R,W),c(W,ee),c(u,le),c(u,se),c(se,j),c(j,te),c(se,he),c(se,B),c(B,F),G(X,F,null),c(B,oe),c(B,pe),c(pe,ve),c(u,be),c(u,_e),c(_e,me),c(me,Ee),c(_e,Ie),c(_e,ge),c(ge,De),G($e,De,null),c(ge,we),c(ge,ie),c(ie,Qe),c(e,Ve),c(e,Ce),c(Ce,Ne),c(Ne,qe),c(Ce,Ae),c(Ce,Le),c(Le,Be),c(Be,Ge),Pe=!0,Je||(rt=K(Le,"click",r[1]),Je=!0)},p:x,i(ye){Pe||(A(y.$$.fragment,ye),A(Y.$$.fragment,ye),A(X.$$.fragment,ye),A($e.$$.fragment,ye),Pe=!0)},o(ye){L(y.$$.fragment,ye),L(Y.$$.fragment,ye),L(X.$$.fragment,ye),L($e.$$.fragment,ye),Pe=!1},d(ye){ye&&d(e),J(y),J(Y),J(X),J($e),Je=!1,rt()}}}function $r(r){const e={examples:{account:{_id:"account",type:"account",name:"Bank Account",balance:5700,currency:"usd"},service:{_id:"service",type:"service",name:"Service",cost:200,currency:"usd",isManual:!0},debt:{_id:"debt",type:"debt",withWho:"Pedro",description:"Pizzas",amount:20,currency:"usd",theyPayMe:!1},currency:{_id:"currency",type:"currency",currency:"usd",total:8600}}};function t(){jt("auth/create")}return[e,t]}class Tr extends ue{constructor(e){super(),fe(this,e,$r,Er,de,{})}}function cl(r){let e,t;return e=new Tr({}),{c(){q(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),t=!0},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function ul(r){let e,t;return e=new kr({}),{c(){q(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),t=!0},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Ir(r){let e,t,n,a=r[0].showNewcomerWelcome&&cl(),l=r[0].showItems&&ul();return{c(){e=b("div"),a&&a.c(),t=I(),l&&l.c(),this.h()},l(s){e=g(s,"DIV",{class:!0});var o=E(e);a&&a.l(o),t=D(o),l&&l.l(o),o.forEach(d),this.h()},h(){m(e,"class","home svelte-1gsbufj")},m(s,o){U(s,e,o),a&&a.m(e,null),c(e,t),l&&l.m(e,null),n=!0},p(s,[o]){s[0].showNewcomerWelcome?a?o&1&&A(a,1):(a=cl(),a.c(),A(a,1),a.m(e,t)):a&&(ae(),L(a,1,1,()=>{a=null}),re()),s[0].showItems?l?o&1&&A(l,1):(l=ul(),l.c(),A(l,1),l.m(e,null)):l&&(ae(),L(l,1,1,()=>{l=null}),re())},i(s){n||(A(a),A(l),n=!0)},o(s){L(a),L(l),n=!1},d(s){s&&d(e),a&&a.d(),l&&l.d()}}}function Dr(r,e,t){const n={};return je(()=>{_n.isSyncEnabled()?fl.hasValidToken()?t(0,n.showItems=!0,n):jt("auth/login"):_n.hasLocalData()||t(0,n.showNewcomerWelcome=!0,n)}),[n]}class Ar extends ue{constructor(e){super(),fe(this,e,Dr,Ir,de,{})}}export{Ar as default};
